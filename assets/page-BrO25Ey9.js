import{a as b,u as y,r as a,s as f,j as e}from"./index-CQCmJ27i.js";function v(){const{profile:i}=b(),m=y(),[l,g]=a.useState([]),[h,p]=a.useState(!0),[r,n]=a.useState("all"),[t,c]=a.useState(null);a.useEffect(()=>{u()},[i]);const u=async()=>{if(!i)return;const{data:s}=await f.from("support_records").select("*").eq("user_id",i.id).order("created_at",{ascending:!1});s&&g(s),p(!1)},d=l.filter(s=>!(r!=="all"&&s.record_type!==r)),x=s=>s==="plan"?"個別支援計画":"ケース記録",o=s=>s==="plan"?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700",j=s=>s==="plan"?"ri-file-text-line":"ri-draft-line";return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>m("/user/dashboard"),className:"w-10 h-10 flex items-center justify-center text-gray-600 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-xl"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"支援記録"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"個別支援計画・ケース記録の閲覧"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4 mb-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700",children:"記録種別:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>n("all"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r==="all"?"bg-indigo-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"すべて"}),e.jsx("button",{onClick:()=>n("plan"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r==="plan"?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"個別支援計画"}),e.jsx("button",{onClick:()=>n("case_note"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap cursor-pointer ${r==="case_note"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"ケース記録"})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-file-list-3-line text-indigo-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"総記録数"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:l.length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-file-text-line text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"個別支援計画"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:l.filter(s=>s.record_type==="plan").length})]})]})}),e.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"ri-draft-line text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ケース記録"}),e.jsx("p",{className:"text-xl font-bold text-gray-900",children:l.filter(s=>s.record_type==="case_note").length})]})]})})]}),h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"読み込み中..."})]}):d.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-file-list-3-line text-3xl text-gray-400"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"記録がありません"}),e.jsx("p",{className:"text-gray-600",children:"支援記録はまだ作成されていません"})]}):e.jsx("div",{className:"grid gap-4",children:d.map(s=>e.jsx("div",{onClick:()=>c(s),className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-all cursor-pointer",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${s.record_type==="plan"?"bg-blue-100":"bg-green-100"}`,children:e.jsx("i",{className:`${j(s.record_type)} ${s.record_type==="plan"?"text-blue-600":"text-green-600"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:s.title}),e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs font-medium ${o(s.record_type)}`,children:x(s.record_type)})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["記録日: ",new Date(s.record_date||s.created_at).toLocaleDateString("ja-JP")]})]})]}),e.jsx("p",{className:"text-gray-700 line-clamp-2",children:s.content})]}),e.jsx("i",{className:"ri-arrow-right-s-line text-gray-400 text-xl"})]})},s.id))})]}),t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-100",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${o(t.record_type)}`,children:x(t.record_type)})}),e.jsx("button",{onClick:()=>c(null),className:"w-10 h-10 flex items-center justify-center text-gray-400 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-2xl"})})]})}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[e.jsx("i",{className:"ri-calendar-line"}),e.jsx("span",{children:new Date(t.record_date||t.created_at).toLocaleDateString("ja-JP",{year:"numeric",month:"long",day:"numeric"})})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"記録内容"}),e.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:t.content})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>c(null),className:"px-6 py-3 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium whitespace-nowrap cursor-pointer",children:"閉じる"})})]})]})})]})}export{v as default};
//# sourceMappingURL=page-BrO25Ey9.js.map
