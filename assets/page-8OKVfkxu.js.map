{"version":3,"file":"page-8OKVfkxu.js","sources":["../../src/pages/user/manuals/page.tsx"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport { supabase } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\ninterface Manual {\n  id: string;\n  title: string;\n  description: string;\n  content_type: 'manual' | 'video';\n  url: string;\n  created_at: string;\n}\n\nexport default function UserManuals() {\n  const navigate = useNavigate();\n  const [manuals, setManuals] = useState<Manual[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [filterType, setFilterType] = useState<'all' | 'manual' | 'video'>('all');\n  const [selectedManual, setSelectedManual] = useState<Manual | null>(null);\n\n  useEffect(() => {\n    fetchManuals();\n  }, []);\n\n  const fetchManuals = async () => {\n    const { data } = await supabase\n      .from('manuals')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (data) {\n      setManuals(data);\n    }\n    setLoading(false);\n  };\n\n  const filteredManuals = manuals.filter((manual) => {\n    if (filterType === 'all') return true;\n    return manual.content_type === filterType;\n  });\n\n  const getYouTubeEmbedUrl = (url: string) => {\n    const videoId = url.match(/(?:youtube\\.com\\/watch\\?v=|youtu\\.be\\/)([^&]+)/)?.[1];\n    return videoId ? `https://www.youtube.com/embed/${videoId}` : url;\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => navigate('/user/dashboard')}\n              className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n            >\n              <i className=\"ri-arrow-left-line text-xl text-gray-600\"></i>\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">マニュアル</h1>\n              <p className=\"text-sm text-gray-600 mt-1\">資料・動画コンテンツを閲覧</p>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-6\">\n          <div className=\"flex gap-2\">\n            <button\n              onClick={() => setFilterType('all')}\n              className={`px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap cursor-pointer ${\n                filterType === 'all'\n                  ? 'bg-teal-500 text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              すべて\n            </button>\n            <button\n              onClick={() => setFilterType('manual')}\n              className={`px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap cursor-pointer ${\n                filterType === 'manual'\n                  ? 'bg-teal-500 text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              <i className=\"ri-file-text-line mr-1\"></i>\n              ファイル\n            </button>\n            <button\n              onClick={() => setFilterType('video')}\n              className={`px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap cursor-pointer ${\n                filterType === 'video'\n                  ? 'bg-teal-500 text-white'\n                  : 'bg-white text-gray-700 hover:bg-gray-50'\n              }`}\n            >\n              <i className=\"ri-youtube-line mr-1\"></i>\n              動画\n            </button>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block w-8 h-8 border-4 border-teal-500 border-t-transparent rounded-full animate-spin\"></div>\n            <p className=\"text-gray-600 mt-4\">読み込み中...</p>\n          </div>\n        ) : filteredManuals.length === 0 ? (\n          <div className=\"bg-white rounded-xl shadow-sm p-12 text-center\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"ri-book-line text-3xl text-gray-400\"></i>\n            </div>\n            <p className=\"text-gray-600\">マニュアルがありません</p>\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n            {filteredManuals.map((manual) => (\n              <div\n                key={manual.id}\n                className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow\"\n              >\n                {manual.content_type === 'video' && (\n                  <div className=\"aspect-video bg-gray-100\">\n                    <iframe\n                      src={getYouTubeEmbedUrl(manual.url)}\n                      className=\"w-full h-full\"\n                      allowFullScreen\n                      title={manual.title}\n                    ></iframe>\n                  </div>\n                )}\n                {manual.content_type === 'manual' && (\n                  <div className=\"aspect-video bg-gradient-to-br from-teal-50 to-blue-50 flex items-center justify-center\">\n                    <i className=\"ri-file-text-line text-6xl text-teal-400\"></i>\n                  </div>\n                )}\n                <div className=\"p-4\">\n                  <div className=\"flex items-start justify-between mb-2\">\n                    <h3 className=\"font-bold text-gray-900 flex-1\">{manual.title}</h3>\n                    <span\n                      className={`px-2 py-1 rounded text-xs font-medium whitespace-nowrap ml-2 ${\n                        manual.content_type === 'manual'\n                          ? 'bg-blue-100 text-blue-700'\n                          : 'bg-red-100 text-red-700'\n                      }`}\n                    >\n                      {manual.content_type === 'manual' ? 'ファイル' : '動画'}\n                    </span>\n                  </div>\n                  {manual.description && (\n                    <p className=\"text-sm text-gray-600 mb-3 line-clamp-2\">\n                      {manual.description}\n                    </p>\n                  )}\n                  <div className=\"flex gap-2\">\n                    {manual.content_type === 'manual' && (\n                      <a\n                        href={manual.url}\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"flex-1 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-sm font-medium text-center whitespace-nowrap cursor-pointer\"\n                      >\n                        <i className=\"ri-external-link-line mr-1\"></i>\n                        開く\n                      </a>\n                    )}\n                    {manual.content_type === 'video' && (\n                      <button\n                        onClick={() => setSelectedManual(manual)}\n                        className=\"flex-1 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n                      >\n                        <i className=\"ri-play-circle-line mr-1\"></i>\n                        詳細を見る\n                      </button>\n                    )}\n                  </div>\n                  <p className=\"text-xs text-gray-400 mt-3\">\n                    {new Date(manual.created_at).toLocaleDateString('ja-JP')}\n                  </p>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n\n        {selectedManual && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n            <div className=\"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n              <div className=\"p-6 border-b border-gray-200 flex items-center justify-between\">\n                <h2 className=\"text-xl font-bold text-gray-900\">{selectedManual.title}</h2>\n                <button\n                  onClick={() => setSelectedManual(null)}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-xl text-gray-600\"></i>\n                </button>\n              </div>\n              <div className=\"p-6\">\n                {selectedManual.content_type === 'video' && (\n                  <div className=\"aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4\">\n                    <iframe\n                      src={getYouTubeEmbedUrl(selectedManual.url)}\n                      className=\"w-full h-full\"\n                      allowFullScreen\n                      title={selectedManual.title}\n                    ></iframe>\n                  </div>\n                )}\n                {selectedManual.description && (\n                  <div className=\"bg-gray-50 rounded-lg p-4\">\n                    <p className=\"text-sm text-gray-700 whitespace-pre-wrap\">\n                      {selectedManual.description}\n                    </p>\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":["UserManuals","navigate","useNavigate","manuals","setManuals","useState","loading","setLoading","filterType","setFilterType","selectedManual","setSelectedManual","useEffect","fetchManuals","data","supabase","filteredManuals","manual","getYouTubeEmbedUrl","url","videoId","jsxs","jsx"],"mappings":"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"}