{"version":3,"file":"page-Bxy5_tWM.js","sources":["../../src/pages/admin/support/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { supabase } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\ninterface SupportRecord {\n  id: string;\n  user_id: string;\n  title: string;\n  content: string;\n  record_type: 'plan' | 'case_note';\n  record_date: string;\n  created_by: string;\n  created_at: string;\n  updated_at: string;\n  profiles: {\n    username: string;\n    furigana: string;\n  };\n  creator: {\n    username: string;\n    furigana: string;\n  };\n}\n\ninterface UserProfile {\n  id: string;\n  username: string;\n  furigana: string;\n}\n\nexport default function AdminSupport() {\n  const { profile, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const [records, setRecords] = useState<SupportRecord[]>([]);\n  const [users, setUsers] = useState<UserProfile[]>([]);\n  const [instructors, setInstructors] = useState<UserProfile[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [selectedUser, setSelectedUser] = useState<string>('all');\n  const [selectedType, setSelectedType] = useState<string>('all');\n  const [selectedInstructor, setSelectedInstructor] = useState<string>('all');\n  const [formData, setFormData] = useState({\n    user_id: '',\n    title: '',\n    content: '',\n    record_type: 'plan' as 'plan' | 'case_note',\n    record_date: new Date().toISOString().split('T')[0],\n  });\n\n  useEffect(() => {\n    // 認証状態の読み込みが完了するまで待つ\n    if (authLoading) return;\n\n    if (profile?.role !== 'admin') {\n      navigate('/user/dashboard');\n      return;\n    }\n    fetchUsers();\n    fetchInstructors();\n    fetchData();\n  }, [profile, authLoading]);\n\n  // 認証状態の読み込み中は何も表示しない\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">読み込み中...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const fetchUsers = async () => {\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('id, username, furigana')\n      .eq('role', 'user')\n      .order('furigana');\n\n    if (error) {\n      console.error('利用者データ取得エラー:', error);\n      return;\n    }\n\n    if (data) {\n      setUsers(data);\n    }\n  };\n\n  const fetchInstructors = async () => {\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('id, username, furigana')\n      .eq('role', 'admin')\n      .order('furigana');\n\n    if (error) {\n      console.error('指導員データ取得エラー:', error);\n      return;\n    }\n\n    if (data) {\n      setInstructors(data);\n    }\n  };\n\n  const fetchData = async () => {\n    setLoading(true);\n    const { data, error } = await supabase\n      .from('support_records')\n      .select(`\n        *,\n        profiles:user_id (\n          username,\n          furigana\n        ),\n        creator:created_by (\n          username,\n          furigana\n        )\n      `)\n      .order('record_date', { ascending: false });\n\n    if (error) {\n      console.error('データ取得エラー:', error);\n    } else if (data) {\n      setRecords(data);\n    }\n    setLoading(false);\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (editingId) {\n      const { error } = await supabase\n        .from('support_records')\n        .update({\n          user_id: formData.user_id,\n          title: formData.title,\n          content: formData.content,\n          record_type: formData.record_type,\n          record_date: formData.record_date,\n        })\n        .eq('id', editingId);\n\n      if (error) {\n        console.error('更新エラー:', error);\n        alert('更新に失敗しました');\n        return;\n      }\n    } else {\n      const { error } = await supabase\n        .from('support_records')\n        .insert({\n          user_id: formData.user_id,\n          title: formData.title,\n          content: formData.content,\n          record_type: formData.record_type,\n          record_date: formData.record_date,\n          created_by: profile?.id,\n        });\n\n      if (error) {\n        console.error('作成エラー:', error);\n        alert('作成に失敗しました');\n        return;\n      }\n    }\n\n    setShowModal(false);\n    setEditingId(null);\n    resetForm();\n    fetchData();\n  };\n\n  const handleEdit = (record: SupportRecord) => {\n    setEditingId(record.id);\n    setFormData({\n      user_id: record.user_id,\n      title: record.title,\n      content: record.content,\n      record_type: record.record_type,\n      record_date: record.record_date,\n    });\n    setShowModal(true);\n  };\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('本当に削除しますか？')) return;\n\n    const { error } = await supabase\n      .from('support_records')\n      .delete()\n      .eq('id', id);\n\n    if (error) {\n      console.error('削除エラー:', error);\n      alert('削除に失敗しました');\n      return;\n    }\n\n    fetchData();\n  };\n\n  const exportRecord = (record: SupportRecord) => {\n    const typeLabel = getTypeLabel(record.record_type);\n    const recordDate = new Date(record.record_date).toLocaleDateString('ja-JP', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      weekday: 'long'\n    });\n    const createdDate = new Date(record.created_at).toLocaleDateString('ja-JP', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n\n    let reportContent = '';\n    reportContent += '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\\n';\n    reportContent += `　　　　　　　${typeLabel}報告書\\n`;\n    reportContent += '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\\n\\n';\n    \n    reportContent += '【基本情報】\\n';\n    reportContent += `　記録種別：${typeLabel}\\n`;\n    reportContent += `　記録日：${recordDate}\\n`;\n    reportContent += `　利用者名：${record.profiles?.username}（${record.profiles?.furigana}）\\n`;\n    reportContent += `　指導員：${record.creator?.username}（${record.creator?.furigana}）\\n`;\n    reportContent += `　作成日時：${createdDate}\\n\\n`;\n    \n    reportContent += '【タイトル】\\n';\n    reportContent += `　${record.title}\\n\\n`;\n    \n    reportContent += '【内容】\\n';\n    const contentLines = record.content.split('\\n');\n    contentLines.forEach(line => {\n      reportContent += `　${line}\\n`;\n    });\n    \n    reportContent += '\\n━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\\n';\n    reportContent += `　発行日：${new Date().toLocaleDateString('ja-JP', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    })}\\n`;\n    reportContent += '━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━\\n';\n\n    const blob = new Blob([reportContent], { type: 'text/plain;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    const fileName = `${typeLabel}_${record.profiles?.username}_${new Date(record.record_date).toISOString().split('T')[0]}.txt`;\n    link.setAttribute('href', url);\n    link.setAttribute('download', fileName);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const resetForm = () => {\n    setFormData({\n      user_id: '',\n      title: '',\n      content: '',\n      record_type: 'plan',\n      record_date: new Date().toISOString().split('T')[0],\n    });\n  };\n\n  const filteredRecords = records.filter(record => {\n    if (selectedUser !== 'all' && record.user_id !== selectedUser) return false;\n    if (selectedType !== 'all' && record.record_type !== selectedType) return false;\n    if (selectedInstructor !== 'all' && record.created_by !== selectedInstructor) return false;\n    return true;\n  });\n\n  const stats = {\n    total: filteredRecords.length,\n    plan: filteredRecords.filter(r => r.record_type === 'plan').length,\n    caseNote: filteredRecords.filter(r => r.record_type === 'case_note').length,\n  };\n\n  const getTypeLabel = (type: string) => {\n    return type === 'plan' ? '個別支援計画' : 'ケース記録';\n  };\n\n  const getTypeColor = (type: string) => {\n    return type === 'plan' \n      ? 'bg-blue-100 text-blue-700' \n      : 'bg-green-100 text-green-700';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => navigate('/admin/dashboard')}\n                className=\"w-10 h-10 flex items-center justify-center text-gray-600 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line text-xl\"></i>\n              </button>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">支援記録管理</h1>\n                <p className=\"text-sm text-gray-600 mt-1\">個別支援計画・ケース記録</p>\n              </div>\n            </div>\n            <button\n              onClick={() => {\n                resetForm();\n                setEditingId(null);\n                setShowModal(true);\n              }}\n              className=\"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              新規作成\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-6 flex flex-wrap gap-4\">\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">利用者</label>\n            <select\n              value={selectedUser}\n              onChange={(e) => setSelectedUser(e.target.value)}\n              className=\"px-4 py-2 pr-8 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer\"\n            >\n              <option value=\"all\">すべての利用者</option>\n              {users.map(user => (\n                <option key={user.id} value={user.id}>\n                  {user.username}（{user.furigana}）\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">記録種別</label>\n            <select\n              value={selectedType}\n              onChange={(e) => setSelectedType(e.target.value)}\n              className=\"px-4 py-2 pr-8 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer\"\n            >\n              <option value=\"all\">すべての種別</option>\n              <option value=\"plan\">個別支援計画</option>\n              <option value=\"case_note\">ケース記録</option>\n            </select>\n          </div>\n\n          <div>\n            <label className=\"block text-sm font-medium text-gray-700 mb-2\">指導員</label>\n            <select\n              value={selectedInstructor}\n              onChange={(e) => setSelectedInstructor(e.target.value)}\n              className=\"px-4 py-2 pr-8 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer\"\n            >\n              <option value=\"all\">すべての指導員</option>\n              {instructors.map(instructor => (\n                <option key={instructor.id} value={instructor.id}>\n                  {instructor.username}（{instructor.furigana}）\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n\n        <div className=\"mb-6\">\n          <div className=\"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white\">\n            <div className=\"grid grid-cols-3 gap-4\">\n              <div className=\"bg-white/20 rounded-lg p-4\">\n                <p className=\"text-sm opacity-90 mb-1\">総記録数</p>\n                <p className=\"text-3xl font-bold\">{stats.total}</p>\n              </div>\n              <div className=\"bg-white/20 rounded-lg p-4\">\n                <p className=\"text-sm opacity-90 mb-1\">個別支援計画</p>\n                <p className=\"text-3xl font-bold\">{stats.plan}</p>\n              </div>\n              <div className=\"bg-white/20 rounded-lg p-4\">\n                <p className=\"text-sm opacity-90 mb-1\">ケース記録</p>\n                <p className=\"text-3xl font-bold\">{stats.caseNote}</p>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"bg-white rounded-xl shadow-sm border border-gray-100\">\n          {loading ? (\n            <div className=\"p-8 text-center text-gray-500\">読み込み中...</div>\n          ) : filteredRecords.length === 0 ? (\n            <div className=\"p-8 text-center text-gray-500\">記録がありません</div>\n          ) : (\n            <div className=\"divide-y divide-gray-100\">\n              {filteredRecords.map((record) => (\n                <div key={record.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex-1\">\n                      <div className=\"flex items-center gap-3 mb-2\">\n                        <span className={`px-3 py-1 rounded-full text-xs font-medium ${getTypeColor(record.record_type)}`}>\n                          {getTypeLabel(record.record_type)}\n                        </span>\n                        <h3 className=\"text-lg font-bold text-gray-900\">{record.title}</h3>\n                      </div>\n                      <div className=\"flex items-center gap-4 text-sm text-gray-600 mb-3\">\n                        <span>\n                          <i className=\"ri-user-line mr-1\"></i>\n                          {record.profiles?.username}（{record.profiles?.furigana}）\n                        </span>\n                        <span>\n                          <i className=\"ri-shield-user-line mr-1\"></i>\n                          指導員: {record.creator?.username}（{record.creator?.furigana}）\n                        </span>\n                        <span>\n                          <i className=\"ri-calendar-line mr-1\"></i>\n                          記録日: {new Date(record.record_date).toLocaleDateString('ja-JP', {\n                            year: 'numeric',\n                            month: 'long',\n                            day: 'numeric'\n                          })}\n                        </span>\n                      </div>\n                      <p className=\"text-gray-700 whitespace-pre-wrap\">{record.content}</p>\n                    </div>\n                    <div className=\"flex gap-2 ml-4\">\n                      <button\n                        onClick={() => exportRecord(record)}\n                        className=\"w-10 h-10 flex items-center justify-center text-green-600 hover:bg-green-50 rounded-lg transition-colors cursor-pointer\"\n                        title=\"報告書をエクスポート\"\n                      >\n                        <i className=\"ri-file-download-line text-lg\"></i>\n                      </button>\n                      <button\n                        onClick={() => handleEdit(record)}\n                        className=\"w-10 h-10 flex items-center justify-center text-blue-600 hover:bg-blue-50 rounded-lg transition-colors cursor-pointer\"\n                      >\n                        <i className=\"ri-edit-line text-lg\"></i>\n                      </button>\n                      <button\n                        onClick={() => handleDelete(record.id)}\n                        className=\"w-10 h-10 flex items-center justify-center text-red-600 hover:bg-red-50 rounded-lg transition-colors cursor-pointer\"\n                      >\n                        <i className=\"ri-delete-bin-line text-lg\"></i>\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          )}\n        </div>\n      </main>\n\n      {showModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-100\">\n              <h2 className=\"text-xl font-bold text-gray-900\">\n                {editingId ? '記録を編集' : '新規記録作成'}\n              </h2>\n            </div>\n            <form onSubmit={handleSubmit} className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  利用者 <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  value={formData.user_id}\n                  onChange={(e) => setFormData({ ...formData, user_id: e.target.value })}\n                  className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer\"\n                  required\n                >\n                  <option value=\"\">選択してください</option>\n                  {users.map(user => (\n                    <option key={user.id} value={user.id}>\n                      {user.username}（{user.furigana}）\n                    </option>\n                  ))}\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  記録種別 <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  value={formData.record_type}\n                  onChange={(e) => setFormData({ ...formData, record_type: e.target.value as 'plan' | 'case_note' })}\n                  className=\"w-full px-4 py-2 pr-8 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer\"\n                  required\n                >\n                  <option value=\"plan\">個別支援計画</option>\n                  <option value=\"case_note\">ケース記録</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  記録日 <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"date\"\n                  value={formData.record_date}\n                  onChange={(e) => setFormData({ ...formData, record_date: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  タイトル <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  value={formData.title}\n                  onChange={(e) => setFormData({ ...formData, title: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500\"\n                  placeholder=\"記録のタイトルを入力\"\n                  required\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  内容 <span className=\"text-red-500\">*</span>\n                </label>\n                <textarea\n                  value={formData.content}\n                  onChange={(e) => setFormData({ ...formData, content: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none\"\n                  rows={8}\n                  placeholder=\"記録の内容を入力\"\n                  required\n                />\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowModal(false);\n                    setEditingId(null);\n                    resetForm();\n                  }}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  キャンセル\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  {editingId ? '更新' : '作成'}\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["AdminSupport","profile","authLoading","useAuth","navigate","useNavigate","records","setRecords","useState","users","setUsers","instructors","setInstructors","loading","setLoading","showModal","setShowModal","editingId","setEditingId","selectedUser","setSelectedUser","selectedType","setSelectedType","selectedInstructor","setSelectedInstructor","formData","setFormData","useEffect","fetchUsers","fetchInstructors","fetchData","jsxs","jsx","data","error","supabase","handleSubmit","e","resetForm","handleEdit","record","handleDelete","id","exportRecord","typeLabel","getTypeLabel","recordDate","createdDate","reportContent","line","blob","link","url","fileName","filteredRecords","stats","r","type","getTypeColor","user","instructor"],"mappings":"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"}