{"version":3,"file":"page-Bbrup95g.js","sources":["../../src/pages/user/attendance/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { supabase } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\ninterface AttendanceRecord {\n  id: string;\n  date: string;\n  status: 'normal' | 'early_leave' | 'late_normal' | 'late_early' | 'absent';\n  created_at: string;\n}\n\n// 日本時間の日付を取得する関数\nconst getJSTDate = (date: Date = new Date()): string => {\n  // 日本時間で日付を取得\n  const jstDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Tokyo' }));\n  const year = jstDate.getFullYear();\n  const month = String(jstDate.getMonth() + 1).padStart(2, '0');\n  const day = String(jstDate.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n};\n\n// 日付文字列をJST基準で比較する関数\nconst isSameDate = (date1: string, date2: string): boolean => {\n  return date1 === date2;\n};\n\nexport default function UserAttendance() {\n  const { profile } = useAuth();\n  const navigate = useNavigate();\n  const [loading, setLoading] = useState(false);\n  const [currentMonth, setCurrentMonth] = useState(new Date());\n  const [attendanceRecords, setAttendanceRecords] = useState<AttendanceRecord[]>([]);\n  const [todayRecord, setTodayRecord] = useState<AttendanceRecord | null>(null);\n\n  useEffect(() => {\n    fetchAttendanceRecords();\n  }, [currentMonth, profile]);\n\n  const fetchAttendanceRecords = async () => {\n    if (!profile) return;\n\n    // 月の開始日と終了日を日本時間で取得\n    const year = currentMonth.getFullYear();\n    const month = currentMonth.getMonth();\n    \n    const startDate = `${year}-${String(month + 1).padStart(2, '0')}-01`;\n    const endDate = `${year}-${String(month + 1).padStart(2, '0')}-${String(new Date(year, month + 1, 0).getDate()).padStart(2, '0')}`;\n\n    console.log('勤怠データ取得中...', { startDate, endDate, userId: profile.id });\n\n    const { data, error } = await supabase\n      .from('attendance')\n      .select('*')\n      .eq('user_id', profile.id)\n      .gte('date', startDate)\n      .lte('date', endDate)\n      .order('date', { ascending: false });\n\n    if (error) {\n      console.error('勤怠データ取得エラー:', error);\n      return;\n    }\n\n    console.log('取得した勤怠データ:', data);\n\n    if (data) {\n      setAttendanceRecords(data);\n      const today = getJSTDate();\n      console.log('今日の日付:', today);\n      const todayData = data.find(record => {\n        console.log('比較:', record.date, 'vs', today);\n        return record.date === today;\n      });\n      console.log('今日の勤怠データ:', todayData);\n      setTodayRecord(todayData || null);\n    }\n  };\n\n  const handleAttendance = async (status: 'normal' | 'early_leave' | 'late_normal' | 'late_early' | 'absent') => {\n    if (!profile) return;\n\n    setLoading(true);\n    const today = getJSTDate();\n    console.log('勤怠記録開始:', { today, status, userId: profile.id });\n\n    try {\n      // 既存のレコードを確認\n      const { data: existingData, error: fetchError } = await supabase\n        .from('attendance')\n        .select('*')\n        .eq('user_id', profile.id)\n        .eq('date', today)\n        .maybeSingle(); // singleの代わりにmaybeSingleを使用\n\n      if (fetchError) {\n        console.error('既存データ確認エラー:', fetchError);\n        throw fetchError;\n      }\n\n      console.log('既存データ:', existingData);\n\n      let result;\n      if (existingData) {\n        // 更新\n        console.log('データを更新中...');\n        result = await supabase\n          .from('attendance')\n          .update({ \n            status, \n            updated_at: new Date().toISOString() \n          })\n          .eq('id', existingData.id)\n          .select();\n      } else {\n        // 新規作成\n        console.log('新しいデータを作成中...');\n        result = await supabase\n          .from('attendance')\n          .insert({\n            user_id: profile.id,\n            date: today,\n            status,\n          })\n          .select();\n      }\n\n      console.log('保存結果:', result);\n\n      if (result.error) {\n        console.error('保存エラー:', result.error);\n        throw result.error;\n      }\n\n      // データを再取得\n      console.log('データを再取得中...');\n      await fetchAttendanceRecords();\n      \n      console.log('勤怠記録完了');\n      alert('勤怠を記録しました');\n    } catch (error) {\n      console.error('勤怠登録エラー:', error);\n      alert('勤怠の登録に失敗しました。もう一度お試しください。');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const getStatusLabel = (status: string) => {\n    const labels: Record<string, string> = {\n      normal: '出勤→通常',\n      early_leave: '出勤→早退',\n      late_normal: '遅刻→通常',\n      late_early: '遅刻→早退',\n      absent: '欠勤',\n    };\n    return labels[status] || status;\n  };\n\n  const getStatusColor = (status: string) => {\n    const colors: Record<string, string> = {\n      normal: 'bg-green-100 text-green-700',\n      early_leave: 'bg-yellow-100 text-yellow-700',\n      late_normal: 'bg-orange-100 text-orange-700',\n      late_early: 'bg-red-100 text-red-700',\n      absent: 'bg-gray-100 text-gray-700',\n    };\n    return colors[status] || 'bg-gray-100 text-gray-700';\n  };\n\n  const attendanceButtons = [\n    { status: 'normal' as const, label: '出勤→通常', icon: 'ri-check-line', color: 'bg-green-500 hover:bg-green-600' },\n    { status: 'early_leave' as const, label: '出勤→早退', icon: 'ri-arrow-left-line', color: 'bg-yellow-500 hover:bg-yellow-600' },\n    { status: 'late_normal' as const, label: '遅刻→通常', icon: 'ri-time-line', color: 'bg-orange-500 hover:bg-orange-600' },\n    { status: 'late_early' as const, label: '遅刻→早退', icon: 'ri-arrow-left-right-line', color: 'bg-red-500 hover:bg-red-600' },\n    { status: 'absent' as const, label: '欠勤', icon: 'ri-close-line', color: 'bg-gray-500 hover:bg-gray-600' },\n  ];\n\n  const stats = {\n    normal: attendanceRecords.filter(r => r.status === 'normal').length,\n    early_leave: attendanceRecords.filter(r => r.status === 'early_leave').length,\n    late_normal: attendanceRecords.filter(r => r.status === 'late_normal').length,\n    late_early: attendanceRecords.filter(r => r.status === 'late_early').length,\n    absent: attendanceRecords.filter(r => r.status === 'absent').length,\n  };\n\n  const previousMonth = () => {\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() - 1));\n  };\n\n  const nextMonth = () => {\n    setCurrentMonth(new Date(currentMonth.getFullYear(), currentMonth.getMonth() + 1));\n  };\n\n  const getStatusDisplayColor = (status: string) => {\n    const colors: Record<string, string> = {\n      normal: 'bg-green-500',\n      early_leave: 'bg-yellow-500',\n      late_normal: 'bg-orange-500',\n      late_early: 'bg-red-500',\n      absent: 'bg-gray-500',\n    };\n    return colors[status] || 'bg-white/20';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => navigate('/user/dashboard')}\n                className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line text-xl text-gray-600\"></i>\n              </button>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">勤怠管理</h1>\n                <p className=\"text-sm text-gray-600 mt-1\">出勤・退勤を記録</p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <div className=\"bg-gradient-to-r from-blue-500 to-indigo-600 rounded-xl p-6 text-white mb-6\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <div>\n                <p className=\"text-sm opacity-90 mb-1\">今日の日付</p>\n                <p className=\"text-2xl font-bold\">{new Date(new Date().toLocaleString('en-US', { timeZone: 'Asia/Tokyo' })).toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })}</p>\n              </div>\n              <div className=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center\">\n                <i className=\"ri-time-line text-3xl\"></i>\n              </div>\n            </div>\n            {todayRecord && (\n              <div className={`${getStatusDisplayColor(todayRecord.status)} rounded-lg p-3`}>\n                <p className=\"text-sm opacity-90 mb-1\">本日の勤怠状況</p>\n                <p className=\"text-lg font-bold\">{getStatusLabel(todayRecord.status)}</p>\n                <p className=\"text-xs opacity-75 mt-1\">記録日時: {new Date(todayRecord.created_at).toLocaleString('ja-JP')}</p>\n              </div>\n            )}\n          </div>\n\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">本日の勤怠を記録</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4\">\n            {attendanceButtons.map((button) => (\n              <button\n                key={button.status}\n                onClick={() => handleAttendance(button.status)}\n                disabled={loading}\n                className={`${button.color} text-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap`}\n              >\n                <div className=\"flex flex-col items-center gap-3\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center\">\n                    <i className={`${button.icon} text-2xl`}></i>\n                  </div>\n                  <span className=\"font-bold text-sm\">{button.label}</span>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div className=\"mb-8\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">今月の統計</h3>\n          <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"ri-check-line text-green-600\"></i>\n                </div>\n                <span className=\"text-2xl font-bold text-gray-900\">{stats.normal}</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">出勤→通常</p>\n            </div>\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"ri-arrow-left-line text-yellow-600\"></i>\n                </div>\n                <span className=\"text-2xl font-bold text-gray-900\">{stats.early_leave}</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">出勤→早退</p>\n            </div>\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"ri-time-line text-orange-600\"></i>\n                </div>\n                <span className=\"text-2xl font-bold text-gray-900\">{stats.late_normal}</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">遅刻→通常</p>\n            </div>\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"ri-arrow-left-right-line text-red-600\"></i>\n                </div>\n                <span className=\"text-2xl font-bold text-gray-900\">{stats.late_early}</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">遅刻→早退</p>\n            </div>\n            <div className=\"bg-white rounded-xl p-4 shadow-sm border border-gray-100\">\n              <div className=\"flex items-center gap-3 mb-2\">\n                <div className=\"w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center\">\n                  <i className=\"ri-close-line text-gray-600\"></i>\n                </div>\n                <span className=\"text-2xl font-bold text-gray-900\">{stats.absent}</span>\n              </div>\n              <p className=\"text-sm text-gray-600\">欠勤</p>\n            </div>\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold text-gray-900\">勤怠履歴</h3>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={previousMonth}\n                className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-s-line text-xl text-gray-600\"></i>\n              </button>\n              <span className=\"text-sm font-medium text-gray-900 min-w-[120px] text-center\">\n                {currentMonth.getFullYear()}年{currentMonth.getMonth() + 1}月\n              </span>\n              <button\n                onClick={nextMonth}\n                className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-arrow-right-s-line text-xl text-gray-600\"></i>\n              </button>\n            </div>\n          </div>\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100\">\n            {attendanceRecords.length === 0 ? (\n              <div className=\"p-8 text-center text-gray-500\">この月の勤怠記録はありません</div>\n            ) : (\n              <div className=\"divide-y divide-gray-100\">\n                {attendanceRecords.map((record) => (\n                  <div key={record.id} className=\"p-4 hover:bg-gray-50 transition-colors\">\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex items-center gap-4\">\n                        <div className=\"text-center\">\n                          <p className=\"text-2xl font-bold text-gray-900\">\n                            {new Date(record.date).getDate()}\n                          </p>\n                          <p className=\"text-xs text-gray-500\">\n                            {new Date(record.date).toLocaleDateString('ja-JP', { weekday: 'short' })}\n                          </p>\n                        </div>\n                        <div>\n                          <p className=\"text-sm text-gray-600 mb-1\">\n                            {new Date(record.date).toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric' })}\n                          </p>\n                          <span className={`inline-block px-3 py-1 rounded-full text-xs font-medium ${getStatusColor(record.status)}`}>\n                            {getStatusLabel(record.status)}\n                          </span>\n                        </div>\n                      </div>\n                      <p className=\"text-xs text-gray-400\">\n                        登録: {new Date(record.created_at).toLocaleTimeString('ja-JP', { hour: '2-digit', minute: '2-digit' })}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":["getJSTDate","date","jstDate","year","month","day","UserAttendance","profile","useAuth","navigate","useNavigate","loading","setLoading","useState","currentMonth","setCurrentMonth","attendanceRecords","setAttendanceRecords","todayRecord","setTodayRecord","useEffect","fetchAttendanceRecords","startDate","endDate","data","error","supabase","today","todayData","record","handleAttendance","status","existingData","fetchError","result","getStatusLabel","getStatusColor","attendanceButtons","stats","r","previousMonth","nextMonth","getStatusDisplayColor","jsxs","jsx","button"],"mappings":"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"}