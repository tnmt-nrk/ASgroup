{"version":3,"file":"page-wUy9b5Y-.js","sources":["../../src/pages/admin/reports/page.tsx"],"sourcesContent":["\nimport { useEffect, useState } from 'react';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { supabase } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\ninterface AttendanceStats {\n  userId: string;\n  username: string;\n  furigana: string;\n  normal: number;\n  earlyLeave: number;\n  lateNormal: number;\n  lateEarly: number;\n  absent: number;\n  notRecorded: number;\n  totalDays: number;\n  attendanceRate: number;\n}\n\ninterface WorkStats {\n  userId: string;\n  username: string;\n  furigana: string;\n  totalTasks: number;\n  completedTasks: number;\n  inProgressTasks: number;\n  avgProgress: number;\n  totalRecords: number;\n}\n\ninterface CategoryStats {\n  category: string;\n  label: string;\n  count: number;\n  avgProgress: number;\n}\n\nconst getJSTDate = (date: Date = new Date()): string => {\n  const jstDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Tokyo' }));\n  const year = jstDate.getFullYear();\n  const month = String(jstDate.getMonth() + 1).padStart(2, '0');\n  const day = String(jstDate.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n};\n\nexport default function AdminReports() {\n  const { profile, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const [reportType, setReportType] = useState<'attendance' | 'work'>('attendance');\n  const [selectedMonth, setSelectedMonth] = useState(new Date());\n  const [attendanceStats, setAttendanceStats] = useState<AttendanceStats[]>([]);\n  const [workStats, setWorkStats] = useState<WorkStats[]>([]);\n  const [categoryStats, setCategoryStats] = useState<CategoryStats[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    // 認証状態の読み込みが完了するまで待つ\n    if (authLoading) return;\n\n    if (profile?.role !== 'admin') {\n      navigate('/user/dashboard');\n      return;\n    }\n    if (reportType === 'attendance') {\n      fetchAttendanceStats();\n    } else {\n      fetchWorkStats();\n    }\n  }, [profile, authLoading, selectedMonth, reportType]);\n\n  // 認証状態の読み込み中は何も表示しない\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">読み込み中...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const fetchAttendanceStats = async () => {\n    setLoading(true);\n    \n    const startDate = new Date(selectedMonth.getFullYear(), selectedMonth.getMonth(), 1);\n    const endDate = new Date(selectedMonth.getFullYear(), selectedMonth.getMonth() + 1, 0);\n    const startDateStr = getJSTDate(startDate);\n    const endDateStr = getJSTDate(endDate);\n    const totalDays = endDate.getDate();\n\n    const { data: users } = await supabase\n      .from('profiles')\n      .select('id, username, furigana')\n      .eq('role', 'user')\n      .order('furigana');\n\n    const { data: records } = await supabase\n      .from('attendance')\n      .select('*')\n      .gte('date', startDateStr)\n      .lte('date', endDateStr);\n\n    if (users && records) {\n      const stats: AttendanceStats[] = users.map(user => {\n        const userRecords = records.filter(r => r.user_id === user.id);\n        const normal = userRecords.filter(r => r.status === 'normal').length;\n        const earlyLeave = userRecords.filter(r => r.status === 'early_leave').length;\n        const lateNormal = userRecords.filter(r => r.status === 'late_normal').length;\n        const lateEarly = userRecords.filter(r => r.status === 'late_early').length;\n        const absent = userRecords.filter(r => r.status === 'absent').length;\n        const notRecorded = totalDays - userRecords.length;\n        const attendanceRate = totalDays > 0 \n          ? Math.round(((normal + earlyLeave + lateNormal + lateEarly) / totalDays) * 100)\n          : 0;\n\n        return {\n          userId: user.id,\n          username: user.username,\n          furigana: user.furigana,\n          normal,\n          earlyLeave,\n          lateNormal,\n          lateEarly,\n          absent,\n          notRecorded,\n          totalDays,\n          attendanceRate,\n        };\n      });\n\n      setAttendanceStats(stats);\n    }\n    \n    setLoading(false);\n  };\n\n  const fetchWorkStats = async () => {\n    setLoading(true);\n\n    const startDate = new Date(selectedMonth.getFullYear(), selectedMonth.getMonth(), 1);\n    const endDate = new Date(selectedMonth.getFullYear(), selectedMonth.getMonth() + 1, 0);\n    const startDateStr = getJSTDate(startDate);\n    const endDateStr = getJSTDate(endDate);\n\n    const { data: users } = await supabase\n      .from('profiles')\n      .select('id, username, furigana')\n      .eq('role', 'user')\n      .order('furigana');\n\n    const { data: tasks } = await supabase\n      .from('work_tasks')\n      .select('*');\n\n    const { data: progress } = await supabase\n      .from('work_progress')\n      .select('*')\n      .gte('date', startDateStr)\n      .lte('date', endDateStr);\n\n    if (users && tasks && progress) {\n      const stats: WorkStats[] = users.map(user => {\n        const userProgress = progress.filter(p => p.user_id === user.id);\n        const userTaskIds = [...new Set(userProgress.map(p => p.task_id))];\n        const completedTasks = userTaskIds.filter(taskId => {\n          const taskProgress = userProgress.filter(p => p.task_id === taskId);\n          return taskProgress.some(p => p.progress_rate === 100);\n        }).length;\n        const inProgressTasks = userTaskIds.filter(taskId => {\n          const taskProgress = userProgress.filter(p => p.task_id === taskId);\n          const maxProgress = Math.max(...taskProgress.map(p => p.progress_rate));\n          return maxProgress > 0 && maxProgress < 100;\n        }).length;\n        const avgProgress = userProgress.length > 0\n          ? Math.round(userProgress.reduce((sum, p) => sum + p.progress_rate, 0) / userProgress.length)\n          : 0;\n\n        return {\n          userId: user.id,\n          username: user.username,\n          furigana: user.furigana,\n          totalTasks: userTaskIds.length,\n          completedTasks,\n          inProgressTasks,\n          avgProgress,\n          totalRecords: userProgress.length,\n        };\n      });\n\n      setWorkStats(stats);\n\n      // カテゴリ別統計\n      const categoryMap: Record<string, { count: number; totalProgress: number; records: number }> = {\n        light_work: { count: 0, totalProgress: 0, records: 0 },\n        craft: { count: 0, totalProgress: 0, records: 0 },\n        pc: { count: 0, totalProgress: 0, records: 0 },\n        it: { count: 0, totalProgress: 0, records: 0 },\n        external: { count: 0, totalProgress: 0, records: 0 },\n      };\n\n      tasks.forEach(task => {\n        const taskProgress = progress.filter(p => p.task_id === task.id);\n        if (taskProgress.length > 0) {\n          categoryMap[task.category].count++;\n          categoryMap[task.category].totalProgress += taskProgress.reduce((sum, p) => sum + p.progress_rate, 0);\n          categoryMap[task.category].records += taskProgress.length;\n        }\n      });\n\n      const categoryLabels: Record<string, string> = {\n        light_work: '軽作業',\n        craft: 'クラフト',\n        pc: 'PC',\n        it: 'IT',\n        external: '外部',\n      };\n\n      const catStats: CategoryStats[] = Object.entries(categoryMap)\n        .filter(([_, data]) => data.count > 0)\n        .map(([category, data]) => ({\n          category,\n          label: categoryLabels[category],\n          count: data.count,\n          avgProgress: data.records > 0 ? Math.round(data.totalProgress / data.records) : 0,\n        }));\n\n      setCategoryStats(catStats);\n    }\n\n    setLoading(false);\n  };\n\n  const previousMonth = () => {\n    setSelectedMonth(new Date(selectedMonth.getFullYear(), selectedMonth.getMonth() - 1));\n  };\n\n  const nextMonth = () => {\n    setSelectedMonth(new Date(selectedMonth.getFullYear(), selectedMonth.getMonth() + 1));\n  };\n\n  const exportToCSV = () => {\n    let csvContent = '';\n    const monthStr = `${selectedMonth.getFullYear()}年${selectedMonth.getMonth() + 1}月`;\n\n    if (reportType === 'attendance') {\n      csvContent = '\\uFEFF'; // BOM for UTF-8\n      csvContent += `勤怠統計レポート,${monthStr}\\n\\n`;\n      csvContent += '利用者名,ふりがな,出勤→通常,出勤→早退,遅刻→通常,遅刻→早退,欠勤,未記入,総日数,出勤率(%)\\n';\n      \n      attendanceStats.forEach(stat => {\n        csvContent += `${stat.username},${stat.furigana},${stat.normal},${stat.earlyLeave},${stat.lateNormal},${stat.lateEarly},${stat.absent},${stat.notRecorded},${stat.totalDays},${stat.attendanceRate}\\n`;\n      });\n\n      const totals = {\n        normal: attendanceStats.reduce((sum, s) => sum + s.normal, 0),\n        earlyLeave: attendanceStats.reduce((sum, s) => sum + s.earlyLeave, 0),\n        lateNormal: attendanceStats.reduce((sum, s) => sum + s.lateNormal, 0),\n        lateEarly: attendanceStats.reduce((sum, s) => sum + s.lateEarly, 0),\n        absent: attendanceStats.reduce((sum, s) => sum + s.absent, 0),\n        notRecorded: attendanceStats.reduce((sum, s) => sum + s.notRecorded, 0),\n        avgRate: attendanceStats.length > 0 \n          ? Math.round(attendanceStats.reduce((sum, s) => sum + s.attendanceRate, 0) / attendanceStats.length)\n          : 0,\n      };\n\n      csvContent += `\\n合計,-,${totals.normal},${totals.earlyLeave},${totals.lateNormal},${totals.lateEarly},${totals.absent},${totals.notRecorded},-,${totals.avgRate}\\n`;\n    } else {\n      csvContent = '\\uFEFF';\n      csvContent += `作業実績レポート,${monthStr}\\n\\n`;\n      csvContent += '利用者名,ふりがな,総作業数,完了作業,進行中作業,平均進捗率(%),進捗記録数\\n';\n      \n      workStats.forEach(stat => {\n        csvContent += `${stat.username},${stat.furigana},${stat.totalTasks},${stat.completedTasks},${stat.inProgressTasks},${stat.avgProgress},${stat.totalRecords}\\n`;\n      });\n\n      const totals = {\n        totalTasks: workStats.reduce((sum, s) => sum + s.totalTasks, 0),\n        completedTasks: workStats.reduce((sum, s) => sum + s.completedTasks, 0),\n        inProgressTasks: workStats.reduce((sum, s) => sum + s.inProgressTasks, 0),\n        avgProgress: workStats.length > 0\n          ? Math.round(workStats.reduce((sum, s) => sum + s.avgProgress, 0) / workStats.length)\n          : 0,\n        totalRecords: workStats.reduce((sum, s) => sum + s.totalRecords, 0),\n      };\n\n      csvContent += `\\n合計,-,${totals.totalTasks},${totals.completedTasks},${totals.inProgressTasks},${totals.avgProgress},${totals.totalRecords}\\n`;\n\n      if (categoryStats.length > 0) {\n        csvContent += '\\n\\nカテゴリ別統計\\n';\n        csvContent += 'カテゴリ,作業数,平均進捗率(%)\\n';\n        categoryStats.forEach(cat => {\n          csvContent += `${cat.label},${cat.count},${cat.avgProgress}\\n`;\n        });\n      }\n    }\n\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const link = document.createElement('a');\n    const url = URL.createObjectURL(blob);\n    link.setAttribute('href', url);\n    link.setAttribute('download', `${reportType === 'attendance' ? '勤怠統計' : '作業実績'}_${selectedMonth.getFullYear()}${String(selectedMonth.getMonth() + 1).padStart(2, '0')}.csv`);\n    link.style.visibility = 'hidden';\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  const getCategoryColor = (category: string) => {\n    const colors: Record<string, string> = {\n      light_work: 'bg-blue-500',\n      craft: 'bg-green-500',\n      pc: 'bg-purple-500',\n      it: 'bg-orange-500',\n      external: 'bg-pink-500',\n    };\n    return colors[category] || 'bg-gray-500';\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => navigate('/admin/dashboard')}\n                className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line text-xl text-gray-600\"></i>\n              </button>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">統計・レポート</h1>\n                <p className=\"text-sm text-gray-600 mt-1\">月次の勤怠統計と作業実績レポート</p>\n              </div>\n            </div>\n            <button\n              onClick={exportToCSV}\n              className=\"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-download-line mr-2\"></i>\n              CSVエクスポート\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-6 flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between\">\n          <div className=\"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm border border-gray-200\">\n            <button\n              onClick={() => setReportType('attendance')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n                reportType === 'attendance'\n                  ? 'bg-blue-500 text-white'\n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-calendar-check-line mr-2\"></i>\n              勤怠統計\n            </button>\n            <button\n              onClick={() => setReportType('work')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n                reportType === 'work'\n                  ? 'bg-blue-500 text-white'\n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-task-line mr-2\"></i>\n              作業実績\n            </button>\n          </div>\n\n          <div className=\"flex items-center gap-2 bg-white rounded-lg px-4 py-2 shadow-sm border border-gray-200\">\n            <button\n              onClick={previousMonth}\n              className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n            >\n              <i className=\"ri-arrow-left-s-line text-xl text-gray-600\"></i>\n            </button>\n            <span className=\"text-sm font-medium text-gray-900 min-w-[120px] text-center\">\n              {selectedMonth.getFullYear()}年{selectedMonth.getMonth() + 1}月\n            </span>\n            <button\n              onClick={nextMonth}\n              className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n            >\n              <i className=\"ri-arrow-right-s-line text-xl text-gray-600\"></i>\n            </button>\n          </div>\n        </div>\n\n        {loading ? (\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center\">\n            <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-gray-500\">データを読み込み中...</p>\n          </div>\n        ) : reportType === 'attendance' ? (\n          <>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n              <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-check-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">出勤→通常 合計</p>\n                <p className=\"text-3xl font-bold\">\n                  {attendanceStats.reduce((sum, s) => sum + s.normal, 0)}日\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-yellow-500 to-yellow-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-time-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">早退・遅刻 合計</p>\n                <p className=\"text-3xl font-bold\">\n                  {attendanceStats.reduce((sum, s) => sum + s.earlyLeave + s.lateNormal + s.lateEarly, 0)}日\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-red-500 to-red-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-close-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">欠勤 合計</p>\n                <p className=\"text-3xl font-bold\">\n                  {attendanceStats.reduce((sum, s) => sum + s.absent, 0)}日\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-percent-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">平均出勤率</p>\n                <p className=\"text-3xl font-bold\">\n                  {attendanceStats.length > 0\n                    ? Math.round(attendanceStats.reduce((sum, s) => sum + s.attendanceRate, 0) / attendanceStats.length)\n                    : 0}%\n                </p>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-x-auto\">\n              <div className=\"p-4 border-b border-gray-100\">\n                <h3 className=\"text-lg font-bold text-gray-900\">利用者別勤怠統計</h3>\n              </div>\n              {attendanceStats.length === 0 ? (\n                <div className=\"p-8 text-center text-gray-500\">\n                  <i className=\"ri-inbox-line text-4xl mb-2\"></i>\n                  <p>データがありません</p>\n                </div>\n              ) : (\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"border-b border-gray-200 bg-gray-50\">\n                      <th className=\"p-4 text-left text-sm font-bold text-gray-900\">利用者名</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">出勤→通常</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">出勤→早退</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">遅刻→通常</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">遅刻→早退</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">欠勤</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">未記入</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">出勤率</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-100\">\n                    {attendanceStats.map((stat) => (\n                      <tr key={stat.userId} className=\"hover:bg-gray-50\">\n                        <td className=\"p-4\">\n                          <div>\n                            <p className=\"font-medium text-gray-900\">{stat.username}</p>\n                            <p className=\"text-sm text-gray-500\">{stat.furigana}</p>\n                          </div>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium\">\n                            {stat.normal}日\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-yellow-100 text-yellow-700 rounded-full text-sm font-medium\">\n                            {stat.earlyLeave}日\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium\">\n                            {stat.lateNormal}日\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-red-100 text-red-700 rounded-full text-sm font-medium\">\n                            {stat.lateEarly}日\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium\">\n                            {stat.absent}日\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium\">\n                            {stat.notRecorded}日\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <div className=\"flex items-center justify-center gap-2\">\n                            <div className=\"w-24 bg-gray-200 rounded-full h-2\">\n                              <div\n                                className=\"bg-blue-500 h-2 rounded-full\"\n                                style={{ width: `${stat.attendanceRate}%` }}\n                              ></div>\n                            </div>\n                            <span className=\"text-sm font-bold text-gray-900 min-w-[45px]\">\n                              {stat.attendanceRate}%\n                            </span>\n                          </div>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              )}\n            </div>\n          </>\n        ) : (\n          <>\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6 mb-6\">\n              <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-task-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">総作業数</p>\n                <p className=\"text-3xl font-bold\">\n                  {workStats.reduce((sum, s) => sum + s.totalTasks, 0)}件\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-check-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">完了作業</p>\n                <p className=\"text-3xl font-bold\">\n                  {workStats.reduce((sum, s) => sum + s.completedTasks, 0)}件\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-time-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">進行中作業</p>\n                <p className=\"text-3xl font-bold\">\n                  {workStats.reduce((sum, s) => sum + s.inProgressTasks, 0)}件\n                </p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-percent-line text-2xl\"></i>\n                  </div>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">平均進捗率</p>\n                <p className=\"text-3xl font-bold\">\n                  {workStats.length > 0\n                    ? Math.round(workStats.reduce((sum, s) => sum + s.avgProgress, 0) / workStats.length)\n                    : 0}%\n                </p>\n              </div>\n            </div>\n\n            {categoryStats.length > 0 && (\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6\">\n                <h3 className=\"text-lg font-bold text-gray-900 mb-4\">カテゴリ別統計</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-5 gap-4\">\n                  {categoryStats.map((cat) => (\n                    <div key={cat.category} className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                      <div className=\"flex items-center gap-2 mb-3\">\n                        <div className={`w-8 h-8 ${getCategoryColor(cat.category)} rounded-lg`}></div>\n                        <span className=\"font-medium text-gray-900\">{cat.label}</span>\n                      </div>\n                      <div className=\"space-y-2\">\n                        <div>\n                          <p className=\"text-xs text-gray-500\">作業数</p>\n                          <p className=\"text-xl font-bold text-gray-900\">{cat.count}件</p>\n                        </div>\n                        <div>\n                          <p className=\"text-xs text-gray-500\">平均進捗率</p>\n                          <p className=\"text-xl font-bold text-gray-900\">{cat.avgProgress}%</p>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-x-auto\">\n              <div className=\"p-4 border-b border-gray-100\">\n                <h3 className=\"text-lg font-bold text-gray-900\">利用者別作業実績</h3>\n              </div>\n              {workStats.length === 0 ? (\n                <div className=\"p-8 text-center text-gray-500\">\n                  <i className=\"ri-inbox-line text-4xl mb-2\"></i>\n                  <p>データがありません</p>\n                </div>\n              ) : (\n                <table className=\"w-full\">\n                  <thead>\n                    <tr className=\"border-b border-gray-200 bg-gray-50\">\n                      <th className=\"p-4 text-left text-sm font-bold text-gray-900\">利用者名</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">総作業数</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">完了作業</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">進行中作業</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">平均進捗率</th>\n                      <th className=\"p-4 text-center text-sm font-bold text-gray-900\">進捗記録数</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-gray-100\">\n                    {workStats.map((stat) => (\n                      <tr key={stat.userId} className=\"hover:bg-gray-50\">\n                        <td className=\"p-4\">\n                          <div>\n                            <p className=\"font-medium text-gray-900\">{stat.username}</p>\n                            <p className=\"text-sm text-gray-500\">{stat.furigana}</p>\n                          </div>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium\">\n                            {stat.totalTasks}件\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-green-100 text-green-700 rounded-full text-sm font-medium\">\n                            {stat.completedTasks}件\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-orange-100 text-orange-700 rounded-full text-sm font-medium\">\n                            {stat.inProgressTasks}件\n                          </span>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <div className=\"flex items-center justify-center gap-2\">\n                            <div className=\"w-24 bg-gray-200 rounded-full h-2\">\n                              <div\n                                className=\"bg-purple-500 h-2 rounded-full\"\n                                style={{ width: `${stat.avgProgress}%` }}\n                              ></div>\n                            </div>\n                            <span className=\"text-sm font-bold text-gray-900 min-w-[45px]\">\n                              {stat.avgProgress}%\n                            </span>\n                          </div>\n                        </td>\n                        <td className=\"p-4 text-center\">\n                          <span className=\"inline-block px-3 py-1 bg-blue-100 text-blue-700 rounded-full text-sm font-medium\">\n                            {stat.totalRecords}件\n                          </span>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              )}\n            </div>\n          </>\n        )}\n      </main>\n    </div>\n  );\n}\n"],"names":["getJSTDate","date","jstDate","year","month","day","AdminReports","profile","authLoading","useAuth","navigate","useNavigate","reportType","setReportType","useState","selectedMonth","setSelectedMonth","attendanceStats","setAttendanceStats","workStats","setWorkStats","categoryStats","setCategoryStats","loading","setLoading","useEffect","fetchAttendanceStats","fetchWorkStats","jsxs","jsx","startDate","endDate","startDateStr","endDateStr","totalDays","users","supabase","records","stats","user","userRecords","r","normal","earlyLeave","lateNormal","lateEarly","absent","notRecorded","attendanceRate","tasks","progress","userProgress","p","userTaskIds","completedTasks","taskId","inProgressTasks","taskProgress","maxProgress","avgProgress","sum","categoryMap","task","categoryLabels","catStats","_","data","category","previousMonth","nextMonth","exportToCSV","csvContent","monthStr","stat","totals","s","cat","blob","link","url","getCategoryColor","Fragment"],"mappings":"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"}