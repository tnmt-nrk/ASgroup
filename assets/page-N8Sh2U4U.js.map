{"version":3,"file":"page-N8Sh2U4U.js","sources":["../../src/pages/user/announcements/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase, Announcement } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function UserAnnouncements() {\n  const navigate = useNavigate();\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [selectedAnnouncement, setSelectedAnnouncement] = useState<Announcement | null>(null);\n\n  useEffect(() => {\n    fetchAnnouncements();\n  }, []);\n\n  const fetchAnnouncements = async () => {\n    const { data } = await supabase\n      .from('announcements')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (data) {\n      setAnnouncements(data);\n    }\n    setLoading(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center gap-4\">\n            <button\n              onClick={() => navigate('/user/dashboard')}\n              className=\"w-10 h-10 flex items-center justify-center text-gray-600 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer\"\n            >\n              <i className=\"ri-arrow-left-line text-xl\"></i>\n            </button>\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-900\">連絡掲示板</h1>\n              <p className=\"text-sm text-gray-600 mt-1\">お知らせを確認</p>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        {loading ? (\n          <div className=\"text-center py-12\">\n            <div className=\"inline-block w-8 h-8 border-4 border-indigo-600 border-t-transparent rounded-full animate-spin\"></div>\n            <p className=\"mt-4 text-gray-600\">読み込み中...</p>\n          </div>\n        ) : announcements.length === 0 ? (\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center\">\n            <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n              <i className=\"ri-notification-line text-3xl text-gray-400\"></i>\n            </div>\n            <h3 className=\"text-lg font-medium text-gray-900 mb-2\">お知らせがありません</h3>\n            <p className=\"text-gray-600\">新しいお知らせが投稿されるとここに表示されます</p>\n          </div>\n        ) : (\n          <div className=\"grid gap-4\">\n            {announcements.map((announcement) => (\n              <div\n                key={announcement.id}\n                onClick={() => setSelectedAnnouncement(announcement)}\n                className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-all cursor-pointer\"\n              >\n                <div className=\"flex items-start gap-4\">\n                  <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                    <i className=\"ri-notification-line text-purple-600 text-xl\"></i>\n                  </div>\n                  <div className=\"flex-1 min-w-0\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-2\">{announcement.title}</h3>\n                    <p className=\"text-gray-700 line-clamp-2 mb-3\">{announcement.content}</p>\n                    <div className=\"flex items-center gap-4 text-xs text-gray-500\">\n                      <span className=\"flex items-center gap-1\">\n                        <i className=\"ri-time-line\"></i>\n                        {new Date(announcement.created_at).toLocaleDateString('ja-JP', {\n                          year: 'numeric',\n                          month: 'long',\n                          day: 'numeric',\n                        })}\n                      </span>\n                    </div>\n                  </div>\n                  <i className=\"ri-arrow-right-s-line text-gray-400 text-2xl\"></i>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </main>\n\n      {selectedAnnouncement && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-100\">\n              <div className=\"flex items-start justify-between gap-4\">\n                <div className=\"flex items-start gap-3 flex-1\">\n                  <div className=\"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                    <i className=\"ri-notification-line text-purple-600 text-xl\"></i>\n                  </div>\n                  <div>\n                    <h2 className=\"text-xl font-bold text-gray-900 mb-1\">\n                      {selectedAnnouncement.title}\n                    </h2>\n                    <p className=\"text-sm text-gray-500\">\n                      {new Date(selectedAnnouncement.created_at).toLocaleDateString('ja-JP', {\n                        year: 'numeric',\n                        month: 'long',\n                        day: 'numeric',\n                        hour: '2-digit',\n                        minute: '2-digit',\n                      })}\n                    </p>\n                  </div>\n                </div>\n                <button\n                  onClick={() => setSelectedAnnouncement(null)}\n                  className=\"w-10 h-10 flex items-center justify-center text-gray-400 hover:bg-gray-100 rounded-lg transition-colors cursor-pointer flex-shrink-0\"\n                >\n                  <i className=\"ri-close-line text-2xl\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              <div className=\"prose max-w-none\">\n                <p className=\"text-gray-700 whitespace-pre-wrap leading-relaxed\">\n                  {selectedAnnouncement.content}\n                </p>\n              </div>\n            </div>\n\n            <div className=\"p-6 border-t border-gray-100\">\n              <button\n                onClick={() => setSelectedAnnouncement(null)}\n                className=\"w-full px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n              >\n                閉じる\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["UserAnnouncements","navigate","useNavigate","announcements","setAnnouncements","useState","loading","setLoading","selectedAnnouncement","setSelectedAnnouncement","useEffect","fetchAnnouncements","data","supabase","jsxs","jsx","announcement"],"mappings":"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"}