{"version":3,"file":"page-DpxM4EWy.js","sources":["../../src/pages/user/dashboard/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { supabase, Announcement } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\nexport default function UserDashboard() {\n  const navigate = useNavigate();\n  const { user, profile, loading: authLoading, signOut } = useAuth();\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [stats, setStats] = useState({\n    todayAttendance: null as string | null,\n    activeTasks: 0,\n    completedTasks: 0,\n    announcements: 0,\n  });\n\n  useEffect(() => {\n    fetchAnnouncements();\n  }, []);\n\n  const fetchAnnouncements = async () => {\n    const { data } = await supabase\n      .from('announcements')\n      .select('*')\n      .order('created_at', { ascending: false })\n      .limit(5);\n\n    if (data) {\n      setAnnouncements(data);\n    }\n    setLoading(false);\n  };\n\n  const handleSignOut = async () => {\n    await signOut();\n    navigate('/login');\n  };\n\n  const menuItems = [\n    {\n      title: '勤怠管理',\n      description: '出勤・退勤を記録',\n      icon: 'ri-calendar-check-line',\n      color: 'bg-blue-500',\n      path: '/user/attendance',\n    },\n    {\n      title: '作業記録',\n      description: '作業内容と進捗を確認',\n      icon: 'ri-task-line',\n      color: 'bg-purple-500',\n      path: '/user/work',\n    },\n    {\n      title: '連絡掲示板',\n      description: 'お知らせを確認',\n      icon: 'ri-notification-line',\n      color: 'bg-green-500',\n      path: '/user/announcements',\n    },\n    {\n      title: '相談窓口',\n      description: '相談を送信',\n      icon: 'ri-question-answer-line',\n      color: 'bg-pink-500',\n      path: '/user/consultation',\n    },\n    {\n      title: 'マニュアル',\n      description: '資料・動画を閲覧',\n      icon: 'ri-book-line',\n      color: 'bg-teal-500',\n      path: '/user/manuals',\n    },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\n          <div className=\"flex justify-between items-center h-16\">\n            <div className=\"flex items-center\">\n              <h1 className=\"text-2xl font-bold text-gray-900\">アルファサービス</h1>\n            </div>\n            <div className=\"flex items-center gap-4\">\n              <span className=\"text-sm text-gray-600\">\n                {profile?.username || 'ユーザー'}さん\n              </span>\n              <button\n                onClick={handleSignOut}\n                className=\"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n              >\n                <i className=\"ri-logout-box-line mr-2\"></i>\n                ログアウト\n              </button>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h2 className=\"text-xl font-bold text-gray-900 mb-4\">ようこそ、{profile?.username}さん</h2>\n          <div className=\"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <p className=\"text-sm opacity-90 mb-1\">今日の日付</p>\n                <p className=\"text-2xl font-bold\">{new Date().toLocaleDateString('ja-JP', { year: 'numeric', month: 'long', day: 'numeric', weekday: 'long' })}</p>\n              </div>\n              <div className=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center\">\n                <i className=\"ri-calendar-check-line text-3xl\"></i>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"mb-8\">\n          <h3 className=\"text-lg font-bold text-gray-900 mb-4\">メニュー</h3>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n            {menuItems.map((item, index) => (\n              <button\n                key={index}\n                onClick={() => navigate(item.path)}\n                className=\"bg-white rounded-xl p-6 shadow-sm hover:shadow-md transition-all text-left cursor-pointer border border-gray-100\"\n              >\n                <div className=\"flex items-start gap-4\">\n                  <div className={`${item.color} w-12 h-12 rounded-lg flex items-center justify-center text-white flex-shrink-0`}>\n                    <i className={`${item.icon} text-2xl`}></i>\n                  </div>\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-bold text-gray-900 mb-1\">{item.title}</h4>\n                    <p className=\"text-sm text-gray-600\">{item.description}</p>\n                  </div>\n                  <i className=\"ri-arrow-right-s-line text-gray-400 text-xl\"></i>\n                </div>\n              </button>\n            ))}\n          </div>\n        </div>\n\n        <div>\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-lg font-bold text-gray-900\">最新のお知らせ</h3>\n            <button\n              onClick={() => navigate('/user/announcements')}\n              className=\"text-sm text-indigo-600 hover:text-indigo-700 font-medium whitespace-nowrap cursor-pointer\"\n            >\n              すべて見る <i className=\"ri-arrow-right-line ml-1\"></i>\n            </button>\n          </div>\n          <div className=\"bg-white rounded-xl shadow-sm border border-gray-100\">\n            {loading ? (\n              <div className=\"p-8 text-center text-gray-500\">読み込み中...</div>\n            ) : announcements.length === 0 ? (\n              <div className=\"p-8 text-center text-gray-500\">お知らせはありません</div>\n            ) : (\n              <div className=\"divide-y divide-gray-100\">\n                {announcements.map((announcement) => (\n                  <div key={announcement.id} className=\"p-4 hover:bg-gray-50 transition-colors\">\n                    <div className=\"flex items-start gap-3\">\n                      <div className=\"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center flex-shrink-0\">\n                        <i className=\"ri-notification-line text-purple-600\"></i>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <h4 className=\"font-medium text-gray-900 mb-1\">{announcement.title}</h4>\n                        <p className=\"text-sm text-gray-600 line-clamp-2\">{announcement.content}</p>\n                        <p className=\"text-xs text-gray-400 mt-2\">\n                          {new Date(announcement.created_at).toLocaleDateString('ja-JP')}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n    </div>\n  );\n}\n"],"names":["UserDashboard","navigate","useNavigate","user","profile","authLoading","signOut","useAuth","announcements","setAnnouncements","useState","loading","setLoading","stats","setStats","useEffect","fetchAnnouncements","data","supabase","handleSignOut","menuItems","jsxs","jsx","item","index","announcement"],"mappings":"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"}