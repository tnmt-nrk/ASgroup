import{u as g,r as a,s as b,j as e}from"./index-CQCmJ27i.js";function j(){const d=g(),[x,m]=a.useState([]),[h,u]=a.useState(!0),[r,l]=a.useState("all"),[s,i]=a.useState(null);a.useEffect(()=>{p()},[]);const p=async()=>{const{data:t}=await b.from("manuals").select("*").order("created_at",{ascending:!1});t&&m(t),u(!1)},n=x.filter(t=>r==="all"?!0:t.content_type===r),c=t=>{const o=t.match(/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&]+)/)?.[1];return o?`https://www.youtube.com/embed/${o}`:t};return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx("header",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>d("/user/dashboard"),className:"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-arrow-left-line text-xl text-gray-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"マニュアル"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"資料・動画コンテンツを閲覧"})]})]})})}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>l("all"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap cursor-pointer ${r==="all"?"bg-teal-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"すべて"}),e.jsxs("button",{onClick:()=>l("manual"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap cursor-pointer ${r==="manual"?"bg-teal-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-file-text-line mr-1"}),"ファイル"]}),e.jsxs("button",{onClick:()=>l("video"),className:`px-4 py-2 rounded-lg font-medium text-sm transition-colors whitespace-nowrap cursor-pointer ${r==="video"?"bg-teal-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:[e.jsx("i",{className:"ri-youtube-line mr-1"}),"動画"]})]})}),h?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"inline-block w-8 h-8 border-4 border-teal-500 border-t-transparent rounded-full animate-spin"}),e.jsx("p",{className:"text-gray-600 mt-4",children:"読み込み中..."})]}):n.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("i",{className:"ri-book-line text-3xl text-gray-400"})}),e.jsx("p",{className:"text-gray-600",children:"マニュアルがありません"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(t=>e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:[t.content_type==="video"&&e.jsx("div",{className:"aspect-video bg-gray-100",children:e.jsx("iframe",{src:c(t.url),className:"w-full h-full",allowFullScreen:!0,title:t.title})}),t.content_type==="manual"&&e.jsx("div",{className:"aspect-video bg-gradient-to-br from-teal-50 to-blue-50 flex items-center justify-center",children:e.jsx("i",{className:"ri-file-text-line text-6xl text-teal-400"})}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h3",{className:"font-bold text-gray-900 flex-1",children:t.title}),e.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium whitespace-nowrap ml-2 ${t.content_type==="manual"?"bg-blue-100 text-blue-700":"bg-red-100 text-red-700"}`,children:t.content_type==="manual"?"ファイル":"動画"})]}),t.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex gap-2",children:[t.content_type==="manual"&&e.jsxs("a",{href:t.url,target:"_blank",rel:"noopener noreferrer",className:"flex-1 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-sm font-medium text-center whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-external-link-line mr-1"}),"開く"]}),t.content_type==="video"&&e.jsxs("button",{onClick:()=>i(t),className:"flex-1 px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer",children:[e.jsx("i",{className:"ri-play-circle-line mr-1"}),"詳細を見る"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:new Date(t.created_at).toLocaleDateString("ja-JP")})]})]},t.id))}),s&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:s.title}),e.jsx("button",{onClick:()=>i(null),className:"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer",children:e.jsx("i",{className:"ri-close-line text-xl text-gray-600"})})]}),e.jsxs("div",{className:"p-6",children:[s.content_type==="video"&&e.jsx("div",{className:"aspect-video bg-gray-100 rounded-lg overflow-hidden mb-4",children:e.jsx("iframe",{src:c(s.url),className:"w-full h-full",allowFullScreen:!0,title:s.title})}),s.description&&e.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:s.description})})]})]})})]})]})}export{j as default};
//# sourceMappingURL=page-8OKVfkxu.js.map
