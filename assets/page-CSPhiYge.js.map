{"version":3,"file":"page-CSPhiYge.js","sources":["../../src/pages/admin/work/page.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { useAuth } from '../../../contexts/AuthContext';\nimport { supabase } from '../../../lib/supabase';\nimport { useNavigate } from 'react-router-dom';\n\ninterface WorkTask {\n  id: string;\n  title: string;\n  category: 'light_work' | 'craft' | 'pc' | 'it' | 'external';\n  description?: string;\n  start_date: string;\n  end_date: string;\n  created_at: string;\n}\n\ninterface WorkProgress {\n  id: string;\n  task_id: string;\n  user_id: string;\n  date: string;\n  progress_rate: number;\n  notes?: string;\n  profiles: {\n    username: string;\n    furigana: string;\n  };\n}\n\ninterface UserProfile {\n  id: string;\n  username: string;\n  furigana: string;\n}\n\n// 日本時間の日付を取得する関数\nconst getJSTDate = (date: Date = new Date()): string => {\n  const jstDate = new Date(date.toLocaleString('en-US', { timeZone: 'Asia/Tokyo' }));\n  const year = jstDate.getFullYear();\n  const month = String(jstDate.getMonth() + 1).padStart(2, '0');\n  const day = String(jstDate.getDate()).padStart(2, '0');\n  return `${year}-${month}-${day}`;\n};\n\nexport default function AdminWork() {\n  const { profile, loading: authLoading } = useAuth();\n  const navigate = useNavigate();\n  const [viewMode, setViewMode] = useState<'list' | 'gantt' | 'progress' | 'chart'>('list');\n  const [selectedDate, setSelectedDate] = useState(new Date());\n  const [tasks, setTasks] = useState<WorkTask[]>([]);\n  const [progressData, setProgressData] = useState<WorkProgress[]>([]);\n  const [allUsers, setAllUsers] = useState<UserProfile[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingTask, setEditingTask] = useState<WorkTask | null>(null);\n  const [showProgressDetailModal, setShowProgressDetailModal] = useState(false);\n  const [selectedTaskForDetail, setSelectedTaskForDetail] = useState<{ task: WorkTask; userId: string } | null>(null);\n  const [showEditProgressModal, setShowEditProgressModal] = useState(false);\n  const [editingProgress, setEditingProgress] = useState<WorkProgress | null>(null);\n  const [newTask, setNewTask] = useState({\n    title: '',\n    category: 'light_work' as const,\n    description: '',\n    start_date: getJSTDate(new Date()),\n    end_date: getJSTDate(new Date()),\n  });\n\n  useEffect(() => {\n    // 認証状態の読み込みが完了するまで待つ\n    if (authLoading) return;\n\n    if (profile?.role !== 'admin') {\n      navigate('/user/dashboard');\n      return;\n    }\n    fetchWorkTasks();\n    fetchProgress();\n    fetchAllUsers();\n  }, [profile, authLoading]);\n\n  // 認証状態の読み込み中は何も表示しない\n  if (authLoading) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n          <p className=\"text-gray-600\">読み込み中...</p>\n        </div>\n      </div>\n    );\n  }\n\n  const fetchWorkTasks = async () => {\n    setLoading(true);\n    const { data } = await supabase\n      .from('work_tasks')\n      .select('*')\n      .order('start_date', { ascending: false });\n\n    if (data) {\n      setTasks(data);\n    }\n    setLoading(false);\n  };\n\n  const fetchProgress = async () => {\n    const { data } = await supabase\n      .from('work_progress')\n      .select(`\n        *,\n        profiles:user_id (\n          username,\n          furigana\n        )\n      `);\n\n    if (data) {\n      setProgressData(data);\n    }\n  };\n\n  const fetchAllUsers = async () => {\n    console.log('利用者データ取得開始...');\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('id, username, furigana, role')\n      .eq('role', 'user')\n      .order('furigana');\n\n    console.log('取得した利用者データ:', data);\n    console.log('エラー:', error);\n\n    if (data) {\n      setAllUsers(data);\n      console.log('利用者数:', data.length);\n    }\n  };\n\n  const handleAddTask = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!profile?.id) return;\n\n    const { error } = await supabase.from('work_tasks').insert([\n      {\n        ...newTask,\n        created_by: profile.id,\n      },\n    ]);\n\n    if (!error) {\n      setShowAddModal(false);\n      setNewTask({\n        title: '',\n        category: 'light_work',\n        description: '',\n        start_date: getJSTDate(new Date()),\n        end_date: getJSTDate(new Date()),\n      });\n      fetchWorkTasks();\n    }\n  };\n\n  const handleEditTask = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingTask) return;\n\n    const { error } = await supabase\n      .from('work_tasks')\n      .update({\n        title: editingTask.title,\n        category: editingTask.category,\n        description: editingTask.description,\n        start_date: editingTask.start_date,\n        end_date: editingTask.end_date,\n      })\n      .eq('id', editingTask.id);\n\n    if (!error) {\n      setShowEditModal(false);\n      setEditingTask(null);\n      fetchWorkTasks();\n    }\n  };\n\n  const handleDeleteTask = async (taskId: string) => {\n    if (!confirm('この作業を削除してもよろしいですか？関連する進捗記録も削除されます。')) {\n      return;\n    }\n\n    // 関連する進捗記録を削除\n    await supabase.from('work_progress').delete().eq('task_id', taskId);\n\n    // 作業を削除\n    const { error } = await supabase.from('work_tasks').delete().eq('id', taskId);\n\n    if (!error) {\n      fetchWorkTasks();\n      fetchProgress();\n    }\n  };\n\n  const openEditModal = (task: WorkTask) => {\n    setEditingTask(task);\n    setShowEditModal(true);\n  };\n\n  const getCategoryLabel = (category: string) => {\n    const labels: Record<string, string> = {\n      light_work: '軽作業',\n      craft: 'クラフト',\n      pc: 'PC',\n      it: 'IT',\n      external: '外部',\n    };\n    return labels[category] || category;\n  };\n\n  const getCategoryColor = (category: string) => {\n    const colors: Record<string, string> = {\n      light_work: 'bg-blue-500',\n      craft: 'bg-green-500',\n      pc: 'bg-purple-500',\n      it: 'bg-orange-500',\n      external: 'bg-pink-500',\n    };\n    return colors[category] || 'bg-gray-500';\n  };\n\n  const getProgressForTask = (taskId: string, userId?: string) => {\n    let progress = progressData.filter(p => p.task_id === taskId);\n    if (userId) {\n      progress = progress.filter(p => p.user_id === userId);\n    }\n    if (progress.length === 0) return 0;\n    const total = progress.reduce((sum, p) => sum + p.progress_rate, 0);\n    return Math.round(total / progress.length);\n  };\n\n  const previousDay = () => {\n    const newDate = new Date(selectedDate);\n    newDate.setDate(newDate.getDate() - 1);\n    setSelectedDate(newDate);\n  };\n\n  const nextDay = () => {\n    const newDate = new Date(selectedDate);\n    newDate.setDate(newDate.getDate() + 1);\n    setSelectedDate(newDate);\n  };\n\n  const getTasksForDate = () => {\n    const dateStr = getJSTDate(selectedDate);\n    return tasks.filter(task => {\n      return task.start_date <= dateStr && task.end_date >= dateStr;\n    });\n  };\n\n  const getGanttData = () => {\n    const today = new Date();\n    const startOfMonth = new Date(today.getFullYear(), today.getMonth(), 1);\n    const endOfMonth = new Date(today.getFullYear(), today.getMonth() + 1, 0);\n    const daysInMonth = endOfMonth.getDate();\n\n    return { startOfMonth, endOfMonth, daysInMonth };\n  };\n\n  const isTaskActiveOnDay = (task: WorkTask, day: number) => {\n    const { startOfMonth } = getGanttData();\n    const checkDate = new Date(startOfMonth.getFullYear(), startOfMonth.getMonth(), day);\n    const checkDateStr = getJSTDate(checkDate);\n    return task.start_date <= checkDateStr && task.end_date >= checkDateStr;\n  };\n\n  // グラフデータ取得関数\n  const getLast7DaysProgress = () => {\n    const days = [];\n    for (let i = 6; i >= 0; i--) {\n      const date = new Date();\n      date.setDate(date.getDate() - i);\n      const dateStr = date.toISOString().split('T')[0];\n      const dayProgress = progressData.filter(p => p.date === dateStr);\n      const avgProgress = dayProgress.length > 0\n        ? Math.round(dayProgress.reduce((sum, p) => sum + p.progress_rate, 0) / dayProgress.length)\n        : 0;\n      days.push({\n        date: dateStr,\n        label: `${date.getMonth() + 1}/${date.getDate()}`,\n        progress: avgProgress,\n      });\n    }\n    return days;\n  };\n\n  const getCategoryDistribution = () => {\n    const distribution: Record<string, number> = {\n      light_work: 0,\n      craft: 0,\n      pc: 0,\n      it: 0,\n      external: 0,\n    };\n\n    tasks.forEach(task => {\n      distribution[task.category]++;\n    });\n\n    return Object.entries(distribution)\n      .filter(([_, count]) => count > 0)\n      .map(([category, count]) => ({\n        category,\n        label: getCategoryLabel(category),\n        count,\n        color: getCategoryColor(category),\n      }));\n  };\n\n  const getTaskProgressData = () => {\n    return tasks.slice(0, 10).map(task => ({\n      task,\n      progress: getProgressForTask(task.id),\n    }));\n  };\n\n  const getUserProgressRanking = () => {\n    return allUsers.map(user => {\n      const userProgress = progressData.filter(p => p.user_id === user.id);\n      const avgProgress = userProgress.length > 0\n        ? Math.round(userProgress.reduce((sum, p) => sum + p.progress_rate, 0) / userProgress.length)\n        : 0;\n      return {\n        user,\n        avgProgress,\n        recordCount: userProgress.length,\n      };\n    }).sort((a, b) => b.avgProgress - a.avgProgress);\n  };\n\n  const dailyTasks = getTasksForDate();\n  const { daysInMonth } = getGanttData();\n  const last7Days = getLast7DaysProgress();\n  const categoryDist = getCategoryDistribution();\n  const taskProgressData = getTaskProgressData();\n  const userRanking = getUserProgressRanking();\n  const totalCategories = categoryDist.reduce((sum, item) => sum + item.count, 0);\n\n  const openProgressDetailModal = (task: WorkTask, userId: string) => {\n    setSelectedTaskForDetail({ task, userId });\n    setShowProgressDetailModal(true);\n  };\n\n  const getTaskProgressDetails = () => {\n    if (!selectedTaskForDetail) return [];\n    \n    return progressData\n      .filter(p => p.task_id === selectedTaskForDetail.task.id && p.user_id === selectedTaskForDetail.userId)\n      .sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime());\n  };\n\n  const handleEditProgress = async (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!editingProgress) return;\n\n    const { error } = await supabase\n      .from('work_progress')\n      .update({\n        progress_rate: editingProgress.progress_rate,\n        notes: editingProgress.notes,\n      })\n      .eq('id', editingProgress.id);\n\n    if (!error) {\n      setShowEditProgressModal(false);\n      setEditingProgress(null);\n      fetchProgress();\n    }\n  };\n\n  const handleDeleteProgress = async (progressId: string) => {\n    if (!confirm('この進捗報告を削除してもよろしいですか？')) {\n      return;\n    }\n\n    const { error } = await supabase\n      .from('work_progress')\n      .delete()\n      .eq('id', progressId);\n\n    if (!error) {\n      fetchProgress();\n    }\n  };\n\n  const openEditProgressModal = (progress: WorkProgress) => {\n    setEditingProgress(progress);\n    setShowEditProgressModal(true);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <header className=\"bg-white shadow-sm\">\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-4\">\n              <button\n                onClick={() => navigate('/admin/dashboard')}\n                className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n              >\n                <i className=\"ri-arrow-left-line text-xl text-gray-600\"></i>\n              </button>\n              <div>\n                <h1 className=\"text-2xl font-bold text-gray-900\">作業管理（管理者）</h1>\n                <p className=\"text-sm text-gray-600 mt-1\">作業内容と進捗を管理</p>\n              </div>\n            </div>\n            <button\n              onClick={() => setShowAddModal(true)}\n              className=\"px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-sm font-medium whitespace-nowrap cursor-pointer\"\n            >\n              <i className=\"ri-add-line mr-2\"></i>\n              新規作業追加\n            </button>\n          </div>\n        </div>\n      </header>\n\n      <main className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-6\">\n          <div className=\"flex items-center gap-2 bg-white rounded-lg p-1 shadow-sm border border-gray-200 inline-flex flex-wrap\">\n            <button\n              onClick={() => setViewMode('list')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n                viewMode === 'list'\n                  ? 'bg-purple-500 text-white'\n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-list-check mr-2\"></i>\n              日別一覧\n            </button>\n            <button\n              onClick={() => setViewMode('gantt')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n                viewMode === 'gantt'\n                  ? 'bg-purple-500 text-white'\n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-bar-chart-horizontal-line mr-2\"></i>\n              ガントチャート\n            </button>\n            <button\n              onClick={() => setViewMode('progress')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n                viewMode === 'progress'\n                  ? 'bg-purple-500 text-white'\n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-user-line mr-2\"></i>\n              利用者別進捗\n            </button>\n            <button\n              onClick={() => setViewMode('chart')}\n              className={`px-4 py-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap ${\n                viewMode === 'chart'\n                  ? 'bg-purple-500 text-white'\n                  : 'text-gray-600 hover:bg-gray-100'\n              }`}\n            >\n              <i className=\"ri-pie-chart-line mr-2\"></i>\n              グラフ分析\n            </button>\n          </div>\n        </div>\n\n        {viewMode === 'list' ? (\n          <>\n            <div className=\"mb-6\">\n              <div className=\"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between\">\n                  <div className=\"flex items-center gap-4\">\n                    <button\n                      onClick={previousDay}\n                      className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-colors cursor-pointer\"\n                    >\n                      <i className=\"ri-arrow-left-s-line text-xl\"></i>\n                    </button>\n                    <div>\n                      <p className=\"text-sm opacity-90 mb-1\">選択日</p>\n                      <p className=\"text-2xl font-bold\">\n                        {selectedDate.toLocaleDateString('ja-JP', {\n                          year: 'numeric',\n                          month: 'long',\n                          day: 'numeric',\n                          weekday: 'long',\n                        })}\n                      </p>\n                    </div>\n                    <button\n                      onClick={nextDay}\n                      className=\"w-10 h-10 flex items-center justify-center rounded-lg hover:bg-white/20 transition-colors cursor-pointer\"\n                    >\n                      <i className=\"ri-arrow-right-s-line text-xl\"></i>\n                    </button>\n                  </div>\n                  <div className=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center\">\n                    <i className=\"ri-task-line text-3xl\"></i>\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100\">\n              <div className=\"p-4 border-b border-gray-100\">\n                <h3 className=\"text-lg font-bold text-gray-900\">本日の作業一覧</h3>\n              </div>\n              {loading ? (\n                <div className=\"p-8 text-center text-gray-500\">読み込み中...</div>\n              ) : dailyTasks.length === 0 ? (\n                <div className=\"p-8 text-center text-gray-500\">\n                  <i className=\"ri-inbox-line text-4xl mb-2\"></i>\n                  <p>本日の作業はありません</p>\n                </div>\n              ) : (\n                <div className=\"divide-y divide-gray-100\">\n                  {dailyTasks.map((task) => {\n                    const progress = getProgressForTask(task.id);\n                    return (\n                      <div key={task.id} className=\"p-6 hover:bg-gray-50 transition-colors\">\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <div className=\"flex items-start gap-4 flex-1\">\n                            <div className={`${getCategoryColor(task.category)} w-12 h-12 rounded-lg flex items-center justify-center text-white flex-shrink-0`}>\n                              <i className=\"ri-briefcase-line text-xl\"></i>\n                            </div>\n                            <div className=\"flex-1\">\n                              <div className=\"flex items-center gap-2 mb-2\">\n                                <span className={`${getCategoryColor(task.category)} text-white text-xs font-medium px-3 py-1 rounded-full`}>\n                                  {getCategoryLabel(task.category)}\n                                </span>\n                              </div>\n                              <h4 className=\"font-bold text-gray-900 mb-2\">{task.title}</h4>\n                              {task.description && (\n                                <p className=\"text-sm text-gray-600 mb-3\">{task.description}</p>\n                              )}\n                              <div className=\"flex items-center gap-4 text-sm text-gray-500\">\n                                <div className=\"flex items-center gap-1\">\n                                  <i className=\"ri-calendar-line\"></i>\n                                  <span>\n                                    {new Date(task.start_date).toLocaleDateString('ja-JP')} 〜 {new Date(task.end_date).toLocaleDateString('ja-JP')}\n                                  </span>\n                                </div>\n                              </div>\n                            </div>\n                          </div>\n                          <div className=\"flex gap-2\">\n                            <button\n                              onClick={() => openEditModal(task)}\n                              className=\"w-10 h-10 flex items-center justify-center rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors cursor-pointer\"\n                              title=\"編集\"\n                            >\n                              <i className=\"ri-edit-line text-lg\"></i>\n                            </button>\n                            <button\n                              onClick={() => handleDeleteTask(task.id)}\n                              className=\"w-10 h-10 flex items-center justify-center rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors cursor-pointer\"\n                              title=\"削除\"\n                            >\n                              <i className=\"ri-delete-bin-line text-lg\"></i>\n                            </button>\n                          </div>\n                        </div>\n                        <div>\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"text-sm font-medium text-gray-700\">全体進捗状況</span>\n                            <span className=\"text-sm font-bold text-gray-900\">{progress}%</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                            <div\n                              className={`${getCategoryColor(task.category)} h-3 rounded-full`}\n                              style={{ width: `${progress}%` }}\n                            ></div>\n                          </div>\n                        </div>\n                      </div>\n                    );\n                  })}\n                </div>\n              )}\n            </div>\n          </>\n        ) : viewMode === 'gantt' ? (\n          <>\n            <div className=\"mb-6\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-lg font-bold text-gray-900\">月間ガントチャート</h3>\n                <span className=\"text-sm font-medium text-gray-900\">\n                  {new Date().getFullYear()}年{new Date().getMonth() + 1}月\n                </span>\n              </div>\n            </div>\n\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-x-auto\">\n              <table className=\"w-full\">\n                <thead>\n                  <tr className=\"border-b border-gray-200\">\n                    <th className=\"p-4 text-left text-sm font-bold text-gray-900 sticky left-0 bg-white z-10 min-w-[200px]\">\n                      作業名\n                    </th>\n                    <th className=\"p-4 text-left text-sm font-bold text-gray-900 min-w-[100px]\">\n                      カテゴリ\n                    </th>\n                    <th className=\"p-4 text-left text-sm font-bold text-gray-900 min-w-[100px]\">\n                      進捗\n                    </th>\n                    <th className=\"p-4 text-center text-sm font-bold text-gray-900 min-w-[100px]\">\n                      操作\n                    </th>\n                    {Array.from({ length: daysInMonth }, (_, i) => i + 1).map((day) => (\n                      <th key={day} className=\"p-2 text-center text-xs font-medium text-gray-600 min-w-[40px]\">\n                        {day}\n                      </th>\n                    ))}\n                  </tr>\n                </thead>\n                <tbody className=\"divide-y divide-gray-100\">\n                  {tasks.map((task) => {\n                    const progress = getProgressForTask(task.id);\n                    return (\n                      <tr key={task.id} className=\"hover:bg-gray-50\">\n                        <td className=\"p-4 sticky left-0 bg-white z-10\">\n                          <p className=\"font-medium text-gray-900 text-sm\">{task.title}</p>\n                        </td>\n                        <td className=\"p-4\">\n                          <span className={`${getCategoryColor(task.category)} text-white text-xs font-medium px-3 py-1 rounded-full whitespace-nowrap`}>\n                            {getCategoryLabel(task.category)}\n                          </span>\n                        </td>\n                        <td className=\"p-4\">\n                          <div className=\"flex items-center gap-2\">\n                            <div className=\"w-16 bg-gray-200 rounded-full h-2\">\n                              <div\n                                className={`${getCategoryColor(task.category)} h-2 rounded-full`}\n                                style={{ width: `${progress}%` }}\n                              ></div>\n                            </div>\n                            <span className=\"text-xs font-medium text-gray-700 whitespace-nowrap\">{progress}%</span>\n                          </div>\n                        </td>\n                        <td className=\"p-4\">\n                          <div className=\"flex items-center justify-center gap-2\">\n                            <button\n                              onClick={() => openEditModal(task)}\n                              className=\"w-8 h-8 flex items-center justify-center rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors cursor-pointer\"\n                              title=\"編集\"\n                            >\n                              <i className=\"ri-edit-line text-sm\"></i>\n                            </button>\n                            <button\n                              onClick={() => handleDeleteTask(task.id)}\n                              className=\"w-8 h-8 flex items-center justify-center rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors cursor-pointer\"\n                              title=\"削除\"\n                            >\n                              <i className=\"ri-delete-bin-line text-sm\"></i>\n                            </button>\n                          </div>\n                        </td>\n                        {Array.from({ length: daysInMonth }, (_, i) => i + 1).map((day) => {\n                          const isActive = isTaskActiveOnDay(task, day);\n                          return (\n                            <td key={day} className=\"p-2\">\n                              {isActive && (\n                                <div className={`${getCategoryColor(task.category)} h-8 rounded`}></div>\n                              )}\n                            </td>\n                          );\n                        })}\n                      </tr>\n                    );\n                  })}\n                </tbody>\n              </table>\n            </div>\n\n            <div className=\"mt-6 bg-white rounded-xl p-6 shadow-sm border border-gray-100\">\n              <h4 className=\"text-sm font-bold text-gray-900 mb-4\">カテゴリ凡例</h4>\n              <div className=\"grid grid-cols-2 md:grid-cols-5 gap-4\">\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-blue-500 rounded-lg\"></div>\n                  <span className=\"text-sm text-gray-600\">軽作業</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-green-500 rounded-lg\"></div>\n                  <span className=\"text-sm text-gray-600\">クラフト</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-purple-500 rounded-lg\"></div>\n                  <span className=\"text-sm text-gray-600\">PC</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-orange-500 rounded-lg\"></div>\n                  <span className=\"text-sm text-gray-600\">IT</span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <div className=\"w-8 h-8 bg-pink-500 rounded-lg\"></div>\n                  <span className=\"text-sm text-gray-600\">外部</span>\n                </div>\n              </div>\n            </div>\n          </>\n        ) : viewMode === 'progress' ? (\n          <>\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-bold text-gray-900\">利用者別進捗・達成度</h3>\n              <p className=\"text-sm text-gray-600 mt-1\">各利用者の作業進捗状況を確認</p>\n            </div>\n\n            {allUsers.length === 0 ? (\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-8 text-center\">\n                <i className=\"ri-user-line text-4xl text-gray-400 mb-2\"></i>\n                <p className=\"text-gray-500\">利用者データがありません</p>\n              </div>\n            ) : (\n              <div className=\"space-y-6\">\n                {allUsers.map((user) => {\n                  const userProgress = progressData.filter(p => p.user_id === user.id);\n                  const totalProgress = userProgress.length > 0\n                    ? Math.round(userProgress.reduce((sum, p) => sum + p.progress_rate, 0) / userProgress.length)\n                    : 0;\n                  const completedTasks = userProgress.filter(p => p.progress_rate === 100).length;\n                  const inProgressTasks = userProgress.filter(p => p.progress_rate > 0 && p.progress_rate < 100).length;\n\n                  return (\n                    <div key={user.id} className=\"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden\">\n                      {/* ユーザーヘッダー */}\n                      <div className=\"bg-gradient-to-r from-purple-500 to-indigo-600 p-6 text-white\">\n                        <div className=\"flex items-center justify-between\">\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"w-16 h-16 bg-white/20 rounded-full flex items-center justify-center text-white font-bold text-2xl\">\n                              {user.username.charAt(0)}\n                            </div>\n                            <div>\n                              <p className=\"text-xl font-bold\">{user.username}</p>\n                              <p className=\"text-sm opacity-90\">{user.furigana}</p>\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className=\"text-3xl font-bold\">{totalProgress}%</p>\n                            <p className=\"text-sm opacity-90\">平均進捗率</p>\n                          </div>\n                        </div>\n                      </div>\n\n                      {/* 統計サマリー */}\n                      <div className=\"grid grid-cols-3 gap-4 p-6 bg-gray-50 border-b border-gray-100\">\n                        <div className=\"text-center\">\n                          <div className=\"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2\">\n                            <i className=\"ri-task-line text-2xl text-blue-600\"></i>\n                          </div>\n                          <p className=\"text-2xl font-bold text-gray-900\">{userProgress.length}</p>\n                          <p className=\"text-xs text-gray-600\">進捗記録数</p>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2\">\n                            <i className=\"ri-check-line text-2xl text-green-600\"></i>\n                          </div>\n                          <p className=\"text-2xl font-bold text-gray-900\">{completedTasks}</p>\n                          <p className=\"text-xs text-gray-600\">完了作業</p>\n                        </div>\n                        <div className=\"text-center\">\n                          <div className=\"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-2\">\n                            <i className=\"ri-time-line text-2xl text-orange-600\"></i>\n                          </div>\n                          <p className=\"text-2xl font-bold text-gray-900\">{inProgressTasks}</p>\n                          <p className=\"text-xs text-gray-600\">進行中作業</p>\n                        </div>\n                      </div>\n\n                      {/* 作業別進捗 */}\n                      <div className=\"p-6\">\n                        <h4 className=\"text-sm font-bold text-gray-900 mb-4\">作業別進捗状況</h4>\n                        {tasks.length === 0 ? (\n                          <p className=\"text-sm text-gray-500 text-center py-8\">作業データがありません</p>\n                        ) : (\n                          <div className=\"space-y-4\">\n                            {tasks.map((task) => {\n                              const progress = getProgressForTask(task.id, user.id);\n                              const hasProgress = userProgress.some(p => p.task_id === task.id);\n                              \n                              return (\n                                <div key={task.id} className={`p-4 rounded-lg border ${hasProgress ? 'bg-purple-50 border-purple-200' : 'bg-gray-50 border-gray-200'}`}>\n                                  <div className=\"flex items-center justify-between mb-3\">\n                                    <div className=\"flex items-center gap-2 flex-1\">\n                                      <span className={`${getCategoryColor(task.category)} text-white text-xs font-medium px-3 py-1 rounded-full whitespace-nowrap`}>\n                                        {getCategoryLabel(task.category)}\n                                      </span>\n                                      <span className=\"text-sm font-medium text-gray-900\">{task.title}</span>\n                                    </div>\n                                    <div className=\"flex items-center gap-2\">\n                                      {hasProgress && (\n                                        <button\n                                          onClick={() => openProgressDetailModal(task, user.id)}\n                                          className=\"px-3 py-1 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors text-xs font-medium whitespace-nowrap cursor-pointer\"\n                                        >\n                                          <i className=\"ri-file-list-line mr-1\"></i>\n                                          報告確認\n                                        </button>\n                                      )}\n                                      {progress === 100 && (\n                                        <span className=\"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center\">\n                                          <i className=\"ri-check-line text-white text-sm\"></i>\n                                        </span>\n                                      )}\n                                      <span className={`text-sm font-bold ${hasProgress ? 'text-purple-600' : 'text-gray-500'}`}>\n                                        {progress}%\n                                      </span>\n                                    </div>\n                                  </div>\n                                  <div className=\"w-full bg-gray-200 rounded-full h-2\">\n                                    <div\n                                      className={`${hasProgress ? getCategoryColor(task.category) : 'bg-gray-400'} h-2 rounded-full transition-all`}\n                                      style={{ width: `${progress}%` }}\n                                    ></div>\n                                  </div>\n                                  {task.description && (\n                                    <p className=\"text-xs text-gray-600 mt-2\">{task.description}</p>\n                                  )}\n                                  <div className=\"flex items-center gap-2 mt-2 text-xs text-gray-500\">\n                                    <i className=\"ri-calendar-line\"></i>\n                                    <span>\n                                      {new Date(task.start_date).toLocaleDateString('ja-JP', { month: 'short', day: 'numeric' })} 〜 \n                                      {new Date(task.end_date).toLocaleDateString('ja-JP', { month: 'short', day: 'numeric' })}\n                                    </span>\n                                  </div>\n                                </div>\n                              );\n                            })}\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </>\n        ) : (\n          <>\n            <div className=\"mb-6\">\n              <h3 className=\"text-lg font-bold text-gray-900\">進捗グラフ分析</h3>\n              <p className=\"text-sm text-gray-600 mt-1\">全体の作業進捗を可視化</p>\n            </div>\n\n            <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6\">\n              {/* 日別進捗推移グラフ */}\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h4 className=\"text-base font-bold text-gray-900\">過去7日間の全体進捗推移</h4>\n                  <i className=\"ri-line-chart-line text-2xl text-purple-500\"></i>\n                </div>\n                <div className=\"space-y-4\">\n                  {last7Days.map((day, index) => (\n                    <div key={index}>\n                      <div className=\"flex items-center justify-between mb-2\">\n                        <span className=\"text-sm font-medium text-gray-700\">{day.label}</span>\n                        <span className=\"text-sm font-bold text-purple-500\">{day.progress}%</span>\n                      </div>\n                      <div className=\"relative h-8 bg-gray-100 rounded-lg overflow-hidden\">\n                        <div\n                          className=\"absolute top-0 left-0 h-full bg-gradient-to-r from-purple-400 to-purple-600 rounded-lg transition-all duration-500\"\n                          style={{ width: `${day.progress}%` }}\n                        ></div>\n                        <div className=\"absolute inset-0 flex items-center justify-center\">\n                          <span className=\"text-xs font-medium text-gray-600\">{day.progress}%</span>\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </div>\n\n              {/* カテゴリ別作業分布 */}\n              <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\">\n                <div className=\"flex items-center justify-between mb-6\">\n                  <h4 className=\"text-base font-bold text-gray-900\">カテゴリ別作業分布</h4>\n                  <i className=\"ri-pie-chart-line text-2xl text-blue-500\"></i>\n                </div>\n                {categoryDist.length === 0 ? (\n                  <div className=\"text-center py-8 text-gray-500\">\n                    <i className=\"ri-inbox-line text-4xl mb-2\"></i>\n                    <p className=\"text-sm\">作業データがありません</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center justify-center mb-6\">\n                      <div className=\"relative w-48 h-48\">\n                        <svg viewBox=\"0 0 100 100\" className=\"transform -rotate-90\">\n                          {categoryDist.map((item, index) => {\n                            const percentage = (item.count / totalCategories) * 100;\n                            const prevPercentages = categoryDist\n                              .slice(0, index)\n                              .reduce((sum, i) => sum + (i.count / totalCategories) * 100, 0);\n                            const strokeDasharray = `${percentage} ${100 - percentage}`;\n                            const strokeDashoffset = -prevPercentages;\n                            const colorMap: Record<string, string> = {\n                              'bg-blue-500': '#3b82f6',\n                              'bg-green-500': '#22c55e',\n                              'bg-purple-500': '#a855f7',\n                              'bg-orange-500': '#f97316',\n                              'bg-pink-500': '#ec4899',\n                            };\n                            return (\n                              <circle\n                                key={index}\n                                cx=\"50\"\n                                cy=\"50\"\n                                r=\"15.915\"\n                                fill=\"transparent\"\n                                stroke={colorMap[item.color] || '#6b7280'}\n                                strokeWidth=\"31.83\"\n                                strokeDasharray={strokeDasharray}\n                                strokeDashoffset={strokeDashoffset}\n                              />\n                            );\n                          })}\n                        </svg>\n                        <div className=\"absolute inset-0 flex items-center justify-center\">\n                          <div className=\"text-center\">\n                            <p className=\"text-2xl font-bold text-gray-900\">{totalCategories}</p>\n                            <p className=\"text-xs text-gray-600\">作業</p>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"space-y-3\">\n                      {categoryDist.map((item, index) => {\n                        const percentage = Math.round((item.count / totalCategories) * 100);\n                        return (\n                          <div key={index} className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-2\">\n                              <div className={`w-4 h-4 ${item.color} rounded`}></div>\n                              <span className=\"text-sm font-medium text-gray-700\">{item.label}</span>\n                            </div>\n                            <div className=\"flex items-center gap-2\">\n                              <span className=\"text-sm text-gray-600\">{item.count}件</span>\n                              <span className=\"text-sm font-bold text-gray-900\">{percentage}%</span>\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </div>\n\n            {/* 作業別進捗状況 */}\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h4 className=\"text-base font-bold text-gray-900\">作業別進捗状況（上位10件）</h4>\n                <i className=\"ri-bar-chart-box-line text-2xl text-green-500\"></i>\n              </div>\n              {taskProgressData.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-inbox-line text-4xl mb-2\"></i>\n                  <p className=\"text-sm\">作業データがありません</p>\n                </div>\n              ) : (\n                <div className=\"space-y-6\">\n                  {taskProgressData.map((item, index) => (\n                    <div key={index}>\n                      <div className=\"flex items-center justify-between mb-3\">\n                        <div className=\"flex items-center gap-3 flex-1\">\n                          <span className={`${getCategoryColor(item.task.category)} text-white text-xs font-medium px-3 py-1 rounded-full whitespace-nowrap`}>\n                            {getCategoryLabel(item.task.category)}\n                          </span>\n                          <span className=\"text-sm font-medium text-gray-900 truncate\">{item.task.title}</span>\n                        </div>\n                        <span className=\"text-sm font-bold text-gray-900 ml-4\">{item.progress}%</span>\n                      </div>\n                      <div className=\"relative h-6 bg-gray-100 rounded-full overflow-hidden\">\n                        <div\n                          className={`${getCategoryColor(item.task.category)} h-6 rounded-full transition-all duration-500`}\n                          style={{ width: `${item.progress}%` }}\n                        ></div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* 利用者別進捗ランキング */}\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 mb-6\">\n              <div className=\"flex items-center justify-between mb-6\">\n                <h4 className=\"text-base font-bold text-gray-900\">利用者別進捗ランキング</h4>\n                <i className=\"ri-trophy-line text-2xl text-yellow-500\"></i>\n              </div>\n              {userRanking.length === 0 ? (\n                <div className=\"text-center py-8 text-gray-500\">\n                  <i className=\"ri-inbox-line text-4xl mb-2\"></i>\n                  <p className=\"text-sm\">利用者データがありません</p>\n                </div>\n              ) : (\n                <div className=\"space-y-4\">\n                  {userRanking.map((item, index) => (\n                    <div key={index} className=\"flex items-center gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors\">\n                      <div className={`w-10 h-10 flex items-center justify-center rounded-full font-bold text-white ${\n                        index === 0 ? 'bg-yellow-500' : index === 1 ? 'bg-gray-400' : index === 2 ? 'bg-orange-600' : 'bg-gray-300'\n                      }`}>\n                        {index + 1}\n                      </div>\n                      <div className=\"flex-1\">\n                        <p className=\"font-bold text-gray-900\">{item.user.username}</p>\n                        <p className=\"text-sm text-gray-500\">{item.user.furigana}</p>\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"text-2xl font-bold text-purple-500\">{item.avgProgress}%</p>\n                        <p className=\"text-xs text-gray-500\">{item.recordCount}件の記録</p>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* 統計サマリー */}\n            <div className=\"grid grid-cols-1 md:grid-cols-4 gap-6\">\n              <div className=\"bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-task-line text-2xl\"></i>\n                  </div>\n                  <i className=\"ri-arrow-up-line text-xl\"></i>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">総作業数</p>\n                <p className=\"text-3xl font-bold\">{tasks.length}</p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-user-line text-2xl\"></i>\n                  </div>\n                  <i className=\"ri-arrow-up-line text-xl\"></i>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">利用者数</p>\n                <p className=\"text-3xl font-bold\">{allUsers.length}</p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-check-line text-2xl\"></i>\n                  </div>\n                  <i className=\"ri-arrow-up-line text-xl\"></i>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">総進捗記録数</p>\n                <p className=\"text-3xl font-bold\">{progressData.length}</p>\n              </div>\n\n              <div className=\"bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white\">\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"w-12 h-12 bg-white/20 rounded-lg flex items-center justify-center\">\n                    <i className=\"ri-percent-line text-2xl\"></i>\n                  </div>\n                  <i className=\"ri-arrow-up-line text-xl\"></i>\n                </div>\n                <p className=\"text-sm opacity-90 mb-1\">全体平均進捗率</p>\n                <p className=\"text-3xl font-bold\">\n                  {tasks.length > 0\n                    ? Math.round(tasks.reduce((sum, task) => sum + getProgressForTask(task.id), 0) / tasks.length)\n                    : 0}%\n                </p>\n              </div>\n            </div>\n          </>\n        )}\n      </main>\n\n      {showAddModal && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-100\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-bold text-gray-900\">新規作業追加</h3>\n                <button\n                  onClick={() => setShowAddModal(false)}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-xl text-gray-600\"></i>\n                </button>\n              </div>\n            </div>\n            <form onSubmit={handleAddTask} className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  作業名 <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={newTask.title}\n                  onChange={(e) => setNewTask({ ...newTask, title: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  placeholder=\"作業名を入力\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  カテゴリ <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  required\n                  value={newTask.category}\n                  onChange={(e) => setNewTask({ ...newTask, category: e.target.value as any })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-8\"\n                >\n                  <option value=\"light_work\">軽作業</option>\n                  <option value=\"craft\">クラフト</option>\n                  <option value=\"pc\">PC</option>\n                  <option value=\"it\">IT</option>\n                  <option value=\"external\">外部</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  作業説明\n                </label>\n                <textarea\n                  value={newTask.description}\n                  onChange={(e) => setNewTask({ ...newTask, description: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  rows={3}\n                  placeholder=\"作業の詳細を入力\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    開始日 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={newTask.start_date}\n                    onChange={(e) => setNewTask({ ...newTask, start_date: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    終了日 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={newTask.end_date}\n                    onChange={(e) => setNewTask({ ...newTask, end_date: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => setShowAddModal(false)}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  キャンセル\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  追加\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {showEditModal && editingTask && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-100\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-bold text-gray-900\">作業内容編集</h3>\n                <button\n                  onClick={() => {\n                    setShowEditModal(false);\n                    setEditingTask(null);\n                  }}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-xl text-gray-600\"></i>\n                </button>\n              </div>\n            </div>\n            <form onSubmit={handleEditTask} className=\"p-6 space-y-4\">\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  作業名 <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  required\n                  value={editingTask.title}\n                  onChange={(e) => setEditingTask({ ...editingTask, title: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  placeholder=\"作業名を入力\"\n                />\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  カテゴリ <span className=\"text-red-500\">*</span>\n                </label>\n                <select\n                  required\n                  value={editingTask.category}\n                  onChange={(e) => setEditingTask({ ...editingTask, category: e.target.value as any })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent pr-8\"\n                >\n                  <option value=\"light_work\">軽作業</option>\n                  <option value=\"craft\">クラフト</option>\n                  <option value=\"pc\">PC</option>\n                  <option value=\"it\">IT</option>\n                  <option value=\"external\">外部</option>\n                </select>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  作業説明\n                </label>\n                <textarea\n                  value={editingTask.description || ''}\n                  onChange={(e) => setEditingTask({ ...editingTask, description: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  rows={3}\n                  placeholder=\"作業の詳細を入力\"\n                />\n              </div>\n\n              <div className=\"grid grid-cols-2 gap-4\">\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    開始日 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={editingTask.start_date}\n                    onChange={(e) => setEditingTask({ ...editingTask, start_date: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n                <div>\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                    終了日 <span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"date\"\n                    required\n                    value={editingTask.end_date}\n                    onChange={(e) => setEditingTask({ ...editingTask, end_date: e.target.value })}\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowEditModal(false);\n                    setEditingTask(null);\n                  }}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  キャンセル\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  保存\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n\n      {/* 作業報告詳細モーダル */}\n      {showProgressDetailModal && selectedTaskForDetail && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4\">\n          <div className=\"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-100 sticky top-0 bg-white z-10\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <h3 className=\"text-xl font-bold text-gray-900\">作業報告詳細</h3>\n                  <p className=\"text-sm text-gray-600 mt-1\">\n                    {allUsers.find(u => u.id === selectedTaskForDetail.userId)?.username} さんの報告\n                  </p>\n                </div>\n                <button\n                  onClick={() => {\n                    setShowProgressDetailModal(false);\n                    setSelectedTaskForDetail(null);\n                  }}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-xl text-gray-600\"></i>\n                </button>\n              </div>\n            </div>\n\n            <div className=\"p-6\">\n              {/* 作業情報 */}\n              <div className=\"bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl p-6 text-white mb-6\">\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex-1\">\n                    <div className=\"flex items-center gap-2 mb-3\">\n                      <span className={`${getCategoryColor(selectedTaskForDetail.task.category)} bg-white/20 text-white text-xs font-medium px-3 py-1 rounded-full`}>\n                        {getCategoryLabel(selectedTaskForDetail.task.category)}\n                      </span>\n                    </div>\n                    <h4 className=\"text-2xl font-bold mb-2\">{selectedTaskForDetail.task.title}</h4>\n                    {selectedTaskForDetail.task.description && (\n                      <p className=\"text-sm opacity-90 mb-3\">{selectedTaskForDetail.task.description}</p>\n                    )}\n                    <div className=\"flex items-center gap-2 text-sm opacity-90\">\n                      <i className=\"ri-calendar-line\"></i>\n                      <span>\n                        {new Date(selectedTaskForDetail.task.start_date).toLocaleDateString('ja-JP')} 〜 \n                        {new Date(selectedTaskForDetail.task.end_date).toLocaleDateString('ja-JP')}\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"text-right\">\n                    <p className=\"text-4xl font-bold\">{getProgressForTask(selectedTaskForDetail.task.id, selectedTaskForDetail.userId)}%</p>\n                    <p className=\"text-sm opacity-90\">平均進捗率</p>\n                  </div>\n                </div>\n              </div>\n\n              {/* 報告一覧 */}\n              <div>\n                <h4 className=\"text-base font-bold text-gray-900 mb-4\">\n                  <i className=\"ri-file-list-3-line mr-2 text-purple-500\"></i>\n                  進捗報告一覧\n                </h4>\n                {getTaskProgressDetails().length === 0 ? (\n                  <div className=\"text-center py-12 text-gray-500\">\n                    <i className=\"ri-inbox-line text-5xl mb-3\"></i>\n                    <p>報告データがありません</p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-4\">\n                    {getTaskProgressDetails().map((progress, index) => (\n                      <div key={progress.id} className=\"bg-white border border-gray-200 rounded-xl p-5 hover:shadow-md transition-shadow\">\n                        <div className=\"flex items-start justify-between mb-4\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className={`w-10 h-10 ${getCategoryColor(selectedTaskForDetail.task.category)} rounded-lg flex items-center justify-center text-white font-bold`}>\n                              {index + 1}\n                            </div>\n                            <div>\n                              <p className=\"font-bold text-gray-900\">\n                                {new Date(progress.date).toLocaleDateString('ja-JP', {\n                                  year: 'numeric',\n                                  month: 'long',\n                                  day: 'numeric',\n                                  weekday: 'long',\n                                })}\n                              </p>\n                              <p className=\"text-xs text-gray-500\">\n                                {new Date(progress.created_at).toLocaleString('ja-JP')} 記録\n                              </p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center gap-2\">\n                            <button\n                              onClick={() => openEditProgressModal(progress)}\n                              className=\"w-8 h-8 flex items-center justify-center rounded-lg bg-blue-500 text-white hover:bg-blue-600 transition-colors cursor-pointer\"\n                              title=\"編集\"\n                            >\n                              <i className=\"ri-edit-line text-sm\"></i>\n                            </button>\n                            <button\n                              onClick={() => handleDeleteProgress(progress.id)}\n                              className=\"w-8 h-8 flex items-center justify-center rounded-lg bg-red-500 text-white hover:bg-red-600 transition-colors cursor-pointer\"\n                              title=\"削除\"\n                            >\n                              <i className=\"ri-delete-bin-line text-sm\"></i>\n                            </button>\n                            <div className=\"text-right ml-2\">\n                              <div className=\"flex items-center gap-2\">\n                                {progress.progress_rate === 100 && (\n                                  <span className=\"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center\">\n                                    <i className=\"ri-check-line text-white\"></i>\n                                  </span>\n                                )}\n                                <span className={`text-2xl font-bold ${\n                                  progress.progress_rate === 100 ? 'text-green-500' : \n                                  progress.progress_rate >= 50 ? 'text-blue-500' : 'text-orange-500'\n                                }`}>\n                                  {progress.progress_rate}%\n                                </span>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n\n                        <div className=\"mb-4\">\n                          <div className=\"flex items-center justify-between mb-2\">\n                            <span className=\"text-sm font-medium text-gray-700\">進捗率</span>\n                          </div>\n                          <div className=\"w-full bg-gray-200 rounded-full h-3\">\n                            <div\n                              className={`${getCategoryColor(selectedTaskForDetail.task.category)} h-3 rounded-full transition-all`}\n                              style={{ width: `${progress.progress_rate}%` }}\n                            ></div>\n                          </div>\n                        </div>\n\n                        {progress.notes && (\n                          <div className=\"bg-gray-50 rounded-lg p-4 border border-gray-200\">\n                            <div className=\"flex items-start gap-2\">\n                              <i className=\"ri-file-text-line text-gray-400 mt-1\"></i>\n                              <div className=\"flex-1\">\n                                <p className=\"text-xs font-medium text-gray-500 mb-1\">作業メモ</p>\n                                <p className=\"text-sm text-gray-900 whitespace-pre-wrap\">{progress.notes}</p>\n                              </div>\n                            </div>\n                          </div>\n                        )}\n                      </div>\n                    ))}\n                  </div>\n                )}\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* 進捗報告編集モーダル */}\n      {showEditProgressModal && editingProgress && (\n        <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[60] p-4\">\n          <div className=\"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto\">\n            <div className=\"p-6 border-b border-gray-100\">\n              <div className=\"flex items-center justify-between\">\n                <h3 className=\"text-xl font-bold text-gray-900\">進捗報告編集</h3>\n                <button\n                  onClick={() => {\n                    setShowEditProgressModal(false);\n                    setEditingProgress(null);\n                  }}\n                  className=\"w-8 h-8 flex items-center justify-center rounded-lg hover:bg-gray-100 transition-colors cursor-pointer\"\n                >\n                  <i className=\"ri-close-line text-xl text-gray-600\"></i>\n                </button>\n              </div>\n            </div>\n            <form onSubmit={handleEditProgress} className=\"p-6 space-y-4\">\n              <div className=\"bg-gray-50 rounded-lg p-4\">\n                <p className=\"text-sm text-gray-500 mb-1\">記録日</p>\n                <p className=\"font-bold text-gray-900\">\n                  {new Date(editingProgress.date).toLocaleDateString('ja-JP', {\n                    year: 'numeric',\n                    month: 'long',\n                    day: 'numeric',\n                    weekday: 'long',\n                  })}\n                </p>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  進捗率 <span className=\"text-red-500\">*</span>\n                </label>\n                <div className=\"space-y-3\">\n                  <input\n                    type=\"range\"\n                    min=\"0\"\n                    max=\"100\"\n                    step=\"5\"\n                    value={editingProgress.progress_rate}\n                    onChange={(e) => setEditingProgress({ ...editingProgress, progress_rate: parseInt(e.target.value) })}\n                    className=\"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer\"\n                  />\n                  <div className=\"flex items-center justify-between\">\n                    <span className=\"text-sm text-gray-600\">0%</span>\n                    <span className=\"text-2xl font-bold text-purple-500\">{editingProgress.progress_rate}%</span>\n                    <span className=\"text-sm text-gray-600\">100%</span>\n                  </div>\n                </div>\n              </div>\n\n              <div>\n                <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n                  作業メモ\n                </label>\n                <textarea\n                  value={editingProgress.notes || ''}\n                  onChange={(e) => setEditingProgress({ ...editingProgress, notes: e.target.value })}\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent\"\n                  rows={4}\n                  placeholder=\"作業内容や気づいたことを記入してください\"\n                />\n              </div>\n\n              <div className=\"flex gap-3 pt-4\">\n                <button\n                  type=\"button\"\n                  onClick={() => {\n                    setShowEditProgressModal(false);\n                    setEditingProgress(null);\n                  }}\n                  className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  キャンセル\n                </button>\n                <button\n                  type=\"submit\"\n                  className=\"flex-1 px-4 py-2 bg-purple-500 text-white rounded-lg hover:bg-purple-600 transition-colors font-medium whitespace-nowrap cursor-pointer\"\n                >\n                  保存\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"],"names":["getJSTDate","date","jstDate","year","month","day","AdminWork","profile","authLoading","useAuth","navigate","useNavigate","viewMode","setViewMode","useState","selectedDate","setSelectedDate","tasks","setTasks","progressData","setProgressData","allUsers","setAllUsers","loading","setLoading","showAddModal","setShowAddModal","showEditModal","setShowEditModal","editingTask","setEditingTask","showProgressDetailModal","setShowProgressDetailModal","selectedTaskForDetail","setSelectedTaskForDetail","showEditProgressModal","setShowEditProgressModal","editingProgress","setEditingProgress","newTask","setNewTask","useEffect","fetchWorkTasks","fetchProgress","fetchAllUsers","jsxs","jsx","data","supabase","error","handleAddTask","e","handleEditTask","handleDeleteTask","taskId","openEditModal","task","getCategoryLabel","category","getCategoryColor","getProgressForTask","userId","progress","p","total","sum","previousDay","newDate","nextDay","getTasksForDate","dateStr","getGanttData","today","startOfMonth","endOfMonth","daysInMonth","isTaskActiveOnDay","checkDate","checkDateStr","getLast7DaysProgress","days","i","dayProgress","avgProgress","getCategoryDistribution","distribution","_","count","getTaskProgressData","getUserProgressRanking","user","userProgress","a","b","dailyTasks","last7Days","categoryDist","taskProgressData","userRanking","totalCategories","item","openProgressDetailModal","getTaskProgressDetails","handleEditProgress","handleDeleteProgress","progressId","openEditProgressModal","Fragment","isActive","totalProgress","completedTasks","inProgressTasks","hasProgress","index","percentage","prevPercentages","strokeDasharray","strokeDashoffset","colorMap","u"],"mappings":"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"}